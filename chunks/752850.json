{
    "exports": {
        "default": {
            "type": {
                "render": "function(e,t){var s,o,eu,ed,ec;let{textValue:ef,richValue:ep,className:em,innerClassName:eh,editorClassName:eE,id:e_,required:eI,disabled:eC,placeholder:ey,accessibilityLabel:eS,channel:eg,type:ex,focused:eT,renderAttachButton:eA,renderAppLauncherButton:eN,renderApplicationCommandIcon:eO,pendingReply:eR,onChange:eM,onResize:ev,onBlur:eL,onFocus:eP,onKeyDown:eb,onSubmit:ek,promptToUpload:eD,highlighted:eU,canMentionRoles:ej,canMentionChannels:ew,maxCharacterCount:eF,showRemainingCharsAfterCount:eG,allowNewLines:eH=!0,characterCountClassName:eB,\"aria-describedby\":eV,\"aria-labelledby\":eY,setEditorRef:eK,autoCompletePosition:eW,children:ez,disableThemedBackground:eJ=!1,emojiPickerCloseOnModalOuterClick:eZ,parentModalKey:e$}=e;u()(null!=ex,\"chat input type must be set\");let{AnalyticsLocationProvider:eq}=(0,I.default)(_.default.CHANNEL_TEXT_AREA),eX=function(e){let t=a.useRef(null);if(null!=e&&\"function\"==typeof e)throw Error(\"Only Ref objects are supported\");return null==e?t:e}(t),eQ=a.useRef(null),e0=a.useRef(null),e1=a.useRef(null),e3=a.useRef(null);eK?.(e0.current);let{activeCommand:e7,activeCommandSection:e2}=(0,p.useStateFromStoresObject)([g.default],()=>({activeCommand:ex.commands?.enabled?g.default.getActiveCommand(eg.id):null,activeCommandSection:ex.commands?.enabled?g.default.getActiveCommandSection(eg.id):null})),{isLurking:e6,isPendingMember:e8,disabled:e4,canAttachFiles:e5,canCreateThreads:e9,canEveryoneSendMessages:te}=function(e,t,n,i){let a=e.getGuildId(),s=(0,p.useStateFromStores)([L.default],()=>null!=a&&L.default.isLurking(a),[a]),l=(0,p.useStateFromStores)([F.default,Y.default],()=>{let e=Y.default.getCurrentUser();return(null!=a&&null!=e?F.default.getMember(a,e.id)?.isPending:null)??!1}),r=(0,p.useStateFromStoresObject)([G.default],()=>{let a=e.isPrivate(),s=G.default.computePermissions(e),r=f.default.has(s,es.Permissions.CREATE_PUBLIC_THREADS)||f.default.has(s,es.Permissions.CREATE_PRIVATE_THREADS),o=(!t.permissions?.requireCreateTherads||r)&&(!t.permissions?.requireSendMessages||f.default.has(s,es.Permissions.SEND_MESSAGES)),u=o&&f.default.has(s,es.Permissions.ATTACH_FILES),d=null!=n,c=(0,j.computeIsReadOnlyThread)(e);return{disabled:i||l||!a&&!o||c,canAttachFiles:!0===t.attachments&&(a||l||u||d),canCreateThreads:r,canEveryoneSendMessages:W.default.canEveryoneRole(es.Permissions.SEND_MESSAGES,e)}},[e,t.permissions.requireCreateTherads,t.permissions.requireSendMessages,t.attachments,n,i,l]);return{isLurking:s,isPendingMember:l,...r}}(eg,ex,e7,eC),tt=ex.toolbarType===Z.SlateToolbarTypes.STATIC,tn=!w.UseLegacyChatInput.useSetting()&&!(0,z.isAndroidWeb)()&&null!=window.ResizeObserver,ti=!tn||!ex.commands?.enabled||!eT||ef!==el.COMMAND_SENTINEL,ta=(0,P.default)(),{isSubmitButtonEnabled:ts,fontSize:tl}=(0,p.useStateFromStoresObject)([E.default],()=>({fontSize:E.default.fontSize,isSubmitButtonEnabled:E.default.isSubmitButtonEnabled})),tr=(0,p.useStateFromStores)([B.default],()=>B.default.isEnabled());!function(e,t){let n=a.useCallback(()=>{!t&&(0,O.toggleExpressionPicker)(er.ExpressionPickerViewType.EMOJI,e)},[t,e]),i=a.useCallback(()=>{!t&&e.gifs?.allowSending&&(0,O.toggleExpressionPicker)(er.ExpressionPickerViewType.GIF,e)},[t,e]),s=a.useCallback(()=>{!t&&e.stickers?.allowSending&&(0,O.toggleExpressionPicker)(er.ExpressionPickerViewType.STICKER,e)},[t,e]);(0,K.useComponentAction)({event:es.ComponentActions.TOGGLE_EMOJI_POPOUT,handler:n}),(0,K.useComponentAction)({event:es.ComponentActions.TOGGLE_GIF_PICKER,handler:i}),(0,K.useComponentAction)({event:es.ComponentActions.TOGGLE_STICKER_PICKER,handler:s})}(ex,e4);let{eventEmitter:to,handleEditorSelectionChanged:tu}=function(e,t,n){let[i]=a.useState(()=>new r.EventEmitter);return a.useEffect(()=>{i.emit(\"text-changed\",t,n)},[t,n,i]),{eventEmitter:i,handleEditorSelectionChanged:t=>{null!=e.current&&i.emit(\"selection-changed\",t)}}}(e0,ef,ep),{submitting:td,submit:tc,handleSubmit:tf}=function(e,t,s,l){let[r,o]=a.useState(!1),u=a.useCallback((a,d,c,f,p)=>{if(r)return;o(!0);let E=k.default.getStickerPreview(l,t.drafts.type)?.map(e=>e.id)??[],_=V.default.getUploads(l,t.drafts.type)??[];if(null==d&&!f&&!p&&(0,v.shouldShowAddMediaToOriginalPostModal)(_,l)){o(!1),(0,m.openModalLazy)(async()=>{let{default:e}=await n.el(\"752850@5273:5339\").then(n.bind(n,\"596764\"));return t=>(0,i.jsx)(e,{...t,threadId:l,attachments:_,sendMessage:()=>u(a,void 0,void 0,void 0,!0)})});return}e({value:a,uploads:_,stickers:E,command:d,commandOptionValues:c,isGif:f}).then(e=>{var n,i;let{shouldClear:a,shouldRefocus:r}=e;let u=(n=a,i=t,(n&&i.submit?.clearOnSubmit)??!1),d=null!=s.current;if(u){if(l!==H.default.getChannelId())h.default.saveDraft(l,\"\",t.drafts.type);else d&&s.current.clearValue()}d&&(o(!1),(0,O.closeExpressionPicker)(),r&&s.current.focus())})},[s,e,r,t,l]);return{submitting:r,submit:u,handleSubmit:a.useCallback(e=>{s?.current?.submit(e)},[])}}(ek,ex,e0,eg.id),{autocompleteRef:tp,handleMaybeShowAutocomplete:tm,handleHideAutocomplete:th}=function(){let e=a.useRef(null),t=a.useCallback(()=>{e.current?.onMaybeShowAutocomplete()},[]),n=a.useCallback(()=>{e.current?.onHideAutocomplete()},[]);return{autocompleteRef:e,handleMaybeShowAutocomplete:t,handleHideAutocomplete:n}}();let tE=(s=tc,o=ex,eu=e0,a.useCallback(e=>{o===Z.ChatInputTypes.CREATE_FORUM_POST?eu.current?.insertGIF(e):s(e.url,void 0,void 0,!0),(0,O.closeExpressionPicker)(),eu.current?.focus()},[eu,s,o]));let t_=(ed=e0,a.useCallback(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=ed.current;null!=e&&null!=i&&i.insertEmoji(e,t,n),t&&(0,O.closeExpressionPicker)()},[ed])),tI=function(e){let{editorRef:t,disabled:n,textValue:i,channelId:s,chatInputType:l,submit:r}=e,{analyticsLocations:o}=(0,I.default)();return a.useCallback((e,a)=>{!n&&((0,U.shouldAttachSticker)(a,i,s,l.drafts.type)?((0,X.trackStickerPreviewSelect)({sticker:e,stickerSelectLocation:a,isReplacement:null!=k.default.getStickerPreview(s,l.drafts.type),analyticsLocations:o}),(0,D.addStickerPreview)(s,e,l.drafts.type)):(r({value:\"\",uploads:void 0,stickers:[e.id]}),t.current?.clearValue()),(0,O.closeExpressionPicker)(),t.current?.focus())},[n,i,s,l.drafts.type,t,o,r])}({editorRef:e0,disabled:e4,textValue:ef,channelId:eg.id,chatInputType:ex,submit:ek});let tC=(ec=e0,a.useCallback(e=>{let t=ec.current;null!=e&&null!=t&&t.insertSound(e),(0,O.closeExpressionPicker)()},[ec])),ty=a.useCallback(()=>e3?.current?.hide(),[]),{editorHeight:tS,handleResize:tg}=function(e){let[t,n]=a.useState(0);return{editorHeight:t,handleResize:a.useCallback(t=>{n(t??0),e?.(t)},[e])}}(ev),{handleTab:tx,handleEnter:tT,handleMoveSelection:tA}=function(e,t,n){let i=a.useCallback(()=>!!(!n&&t.current?.onTabOrEnter(!1))||e.current?.onTabOrEnter(!1)||!1,[n]),s=a.useCallback(()=>!!(!n&&t.current?.onTabOrEnter(!0))||e.current?.onTabOrEnter(!0)||!1,[n]);return{handleTab:i,handleEnter:s,handleMoveSelection:a.useCallback(i=>!!(!n&&t.current?.onMoveSelection(i))||e.current?.onMoveSelection(i)||!1,[n])}}(tp,eQ,ti),{expressionPickerView:tN,shouldHideExpressionPicker:tO,handleAutocompleteVisibilityChange:tR,handleOuterClick:tM}=function(e,t,n){let[i,s]=(0,O.useExpressionPickerStore)(e=>[e.activeView,e.activeViewType],d.default);a.useEffect(()=>()=>{(0,O.closeExpressionPicker)(e)},[e]);let l=a.useCallback(e=>{t.emit(\"autocomplete-visibility-change\",e),e&&(0,O.closeExpressionPicker)()},[t]),r=a.useCallback(()=>{null==i&&n.current?.handleOuterClick()},[i]),o=null==i||null==s||s!==e;return{expressionPickerView:i,shouldHideExpressionPicker:o,handleAutocompleteVisibilityChange:l,handleOuterClick:r}}(ex,to,e0),tv=C.AppLauncherDesktopExperiment.useExperiment({location:\"chat_input\"},{autoTrackExposure:!1}).enabled,tL=(0,p.useStateFromStores)([y.default],()=>y.default.shouldShowPopup(),[]);(0,J.useHereMentionCallback)(to,eg.guild_id,eg.id);let tP=null!=eR,tb=e4&&!((e6||e8)&&te)||td&&ex.submit?.useDisabledStylesOnSubmit,tk=null,tD=null;null!=e7?tk=eO?.(e7,e2,eo.attachButton):(!e4||e9)&&(tk=eA?.(tP,eo.attachButton),tv&&(tD=eN?.()));let tU=tn&&null!=ep&&!e4&&ex.showCharacterCount&&null==e7,tj=tn&&!__OVERLAY__&&null!=ep&&null==e7,tw=function(e,t,n,i){let a=w.ExpressionSuggestionsEnabled.useSetting(),s=(0,p.useStateFromStores)([k.default],()=>k.default.getStickerPreview(e.id,t.drafts.type)),l=null!=s&&s.length>0;return a&&t.stickers?.autoSuggest&&!l&&i.current?.isVisible()!==!0&&!__OVERLAY__&&null!=n}(eg,ex,ep,tp),tF=(0,T.useShouldShowPTONotice)(eg),tG=null!=e7||null!=eR||tF,tH=!!ex.emojis?.button&&tS<=44;return(0,i.jsx)(N.EventEmitterProvider,{value:to,children:(0,i.jsxs)(eq,{children:[tj&&tt?(0,i.jsx)(ea.default,{editorRef:e0,options:ex.markdown,channel:eg}):tj?(0,i.jsx)(ei.default,{ref:e3,editorRef:e0,containerRef:e1,options:ex.markdown}):null,(0,i.jsxs)(\"div\",{ref:eX,className:l()(em,{[eo.channelTextArea]:!0,[eo.channelTextAreaDisabled]:tb,[eo.highlighted]:eU,[eo.textAreaMobileThemed]:c.isMobile}),onMouseDown:tM,children:[(0,i.jsx)(Q.default,{type:ex,channel:eg,activeCommand:e7,pendingReply:eR}),(0,i.jsxs)(\"div\",{ref:e1,onScroll:ty,className:l()(eh,{[eo.scrollableContainer]:!0,[eo.themedBackground]:!eJ,[eo.webkit]:\"Blink\"===platform.layout,[eo.hasConnectedBar]:tG}),children:[(0,i.jsx)(q.default,{channelId:eg.id,chatInputType:ex}),ex.hideAttachmentArea?null:(0,i.jsx)(et.default,{channelId:eg.id,type:ex,canAttachFiles:e5}),(0,i.jsxs)(\"div\",{className:l()(eo.inner,{[eo.innerDisabled]:tb,[eo.sansAttachButton]:ex!==Z.ChatInputTypes.EDIT&&(null!=tk||tb&&null==tk||e6),[eo.sansAttachButtonCreateThread]:ex===Z.ChatInputTypes.THREAD_CREATION,[eo.sansAttachButtonCreatePost]:ex===Z.ChatInputTypes.CREATE_FORUM_POST}),children:[tk,tD,(0,i.jsx)(m.FocusRing,{ringTarget:eX,ringClassName:eo.focusRing,children:(0,i.jsx)($.default,{ref:e0,id:e_,focused:eT,useSlate:tn,textValue:ef,richValue:ep,disabled:e4,placeholder:ey,required:eI,accessibilityLabel:eS,isPreviewing:(e6||e8)&&te,channel:eg,type:ex,canPasteFiles:e5,uploadPromptCharacterCount:es.MAX_MESSAGE_LENGTH_PREMIUM,maxCharacterCount:eF??ta,allowNewLines:eH,\"aria-describedby\":eV,onChange:eM,onResize:tg,onBlur:eL,onFocus:eP,onKeyDown:eb,onSubmit:tc,onTab:tx,onEnter:tT,onMoveSelection:tA,onSelectionChanged:tu,onMaybeShowAutocomplete:tm,onHideAutocomplete:th,promptToUpload:eD,fontSize:tl,spellcheckEnabled:tr,canOnlyUseTextCommands:tP,className:l()({[eo.textAreaThreadCreation]:ex===Z.ChatInputTypes.THREAD_CREATION,[eo.profileBioInput]:ex===Z.ChatInputTypes.PROFILE_BIO_INPUT},eE),\"aria-labelledby\":eY})}),(0,i.jsx)(ee.default,{type:ex,disabled:e4,channel:eg,handleSubmit:tf,isEmpty:0===ef.trim().length})]})]}),ti?null:(0,i.jsx)(x.default,{ref:eQ,channel:eg,canOnlyUseTextCommands:tP}),(0,i.jsx)(A.default,{ref:tp,channel:eg,canMentionRoles:ej,canMentionChannels:ew,useNewSlashCommands:tn,canOnlyUseTextCommands:tP,canSendStickers:ex.stickers?.allowSending,textValue:ef,focused:eT,expressionPickerView:tN,type:ex,editorRef:e0,onSendMessage:tc,onSendSticker:tI,onVisibilityChange:tR,editorHeight:tS,setValue:(e,t)=>eM?.(null,e,t),position:eW}),(0,i.jsx)(b.default,{textValue:ef,editorHeight:tS}),tU?(0,i.jsx)(en.default,{type:ex,textValue:ef,className:l()(eB,{[eo.indentCharacterCount]:tH}),maxCharacterCount:eF,showRemainingCharsAfterCount:eG}):null,tw?(0,i.jsx)(M.default,{editorRef:e0,channel:eg,isEditorFocused:eT,onSelectSticker:tI,submitButtonVisible:ex.submit?.button&&(ex.submit?.ignorePreference??ts),stickerIconVisible:ex.stickers?.button??!1}):null,ez]}),tO?null:(0,i.jsx)(R.default,{positionTargetRef:eX,type:ex,onSelectGIF:tE,onSelectEmoji:t_,onSelectSticker:tI,onSelectSound:tC,channel:eg,closeOnModalOuterClick:eZ,parentModalKey:e$,position:\"top\",align:\"right\",positionLayerClassName:eo.expressionPickerPositionLayer}),tL?(0,i.jsx)(S.default,{positionTargetRef:eX,channel:eg,closeOnModalOuterClick:eZ,parentModalKey:e$}):null]})})}"
            },
            "compare": null
        }
    }
}