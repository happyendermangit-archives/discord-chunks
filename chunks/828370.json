{
    "exports": {
        "default": "e=>{let t,{listing:n,guildId:s,groupListingId:S,analyticsLocation:g,showBenefitsFirst:x,onComplete:T,forcesTransitionToGuild:A}=e,N=n?.subscription_plans[0],O=n?.application_id,R=N?.id,M=n?.published===!0,v=N?.sku_id,L=(0,r.useStateFromStores)([m.default],()=>null!=R?m.default.get(R):null),P=(0,h.useApplication)(O),b=(0,h.useSubscriptionListingsForGroup)(S,{includeSoftDeleted:!0}).map(e=>e.subscription_plans[0].id),{analyticsLocations:k}=(0,d.default)(),{activeSubscription:D,activeEntitlement:U}=(0,h.useActiveSubscriptionListingForApplication)(O,s),j=(0,h.useEligibleApplicationSubscriptionGuilds)(O,s),w=(0,c.default)(),F=null!=n&&(0,E.isApplicationUserSubscription)(n.sku_flags),G=null!=U&&U.userId===p.default.getCurrentUser()?.id,H=null==U||G,B=null==U||b.length>1,V=null!=s||j.length>0,Y=F&&G,K=null!=L&&null!=P&&H&&B&&(V||F)&&!Y;return H?V?Y&&null!=L&&(t=y.default.Messages.APPLICATION_USER_SUBSCRIPTION_ALREADY_SUBSCRIBED.format({tierName:L.name})):t=y.default.Messages.APPLICATION_SUBSCRIPTION_NO_GUILD_AVAILABLE:t=y.default.Messages.APPLICATION_SUBSCRIPTIONS_CANNOT_MANAGE_SUBSCRIPTION,a.useEffect(()=>{M&&null!=v&&w&&o.default.wait(()=>{(0,u.fetchSubscriptionPlansForSKU)(v)})},[M,v,w]),{openModal:a.useCallback(()=>{l()(null!=n,\"No subscription listing\"),l()(null!=P,\"No application\"),l()(null!=N,\"No subscription plan\"),l()(M,\"Cannot purchase this unpublished plan\");let e=()=>{(0,f.openApplicationSubscriptionPaymentModal)({activeSubscription:D,analyticsSubscriptionType:C.SubscriptionTypes.APPLICATION,analyticsLocations:k,analyticsLocation:g,renderHeader:(e,t,n)=>(0,i.jsx)(_.PurchaseHeader,{step:n,onClose:()=>t(!1)}),initialPlanId:N.id,skuId:N.sku_id,guildId:s,eligibleApplicationSubscriptionGuilds:j,planGroup:b,listing:n,application:P,showBenefitsFirst:x,onComplete:T,forcesTransitionToGuild:A})};!V&&F?(0,I.confirmNoSharedServerSubscribeWarningModal)({application:P,onConfirm:e,onCancel:()=>{}}):e()},[M,n,N,b,P,s,V,F,k,g,D,x,j,T,A]),canOpenModal:K,cannotOpenReason:t}}"
    }
}