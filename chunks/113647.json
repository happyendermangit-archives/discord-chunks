{
    "exports": {
        "AnalyticsFeedItemSeenManager": "class c{constructor({id:e,windowId:t,isPaused:n}){this.initialize=()=>{o.default.subscribe(\"ANALYTICS_FEED_ITEM_SEEN\",this.handleFeedItemSeen),o.default.subscribe(\"ANALYTICS_FEED_ITEM_UNSEEN\",this.handleFeedItemUnseen),o.default.subscribe(\"ANALYTICS_FEED_FLUSH\",this.handleFeedItemFlush),o.default.subscribe(\"APP_STATE_UPDATE\",this.handleAppStateUpdate),o.default.subscribe(\"DRAWER_OPEN\",this.handleDrawerOpen),o.default.subscribe(\"DRAWER_CLOSE\",this.handleDrawerClose),o.default.subscribe(\"WINDOW_FOCUS\",this.handleWindowFocus),this.onInitialize?.()},this.terminate=()=>{o.default.unsubscribe(\"ANALYTICS_FEED_ITEM_SEEN\",this.handleFeedItemSeen),o.default.unsubscribe(\"ANALYTICS_FEED_ITEM_UNSEEN\",this.handleFeedItemUnseen),o.default.unsubscribe(\"ANALYTICS_FEED_FLUSH\",this.handleFeedItemFlush),o.default.unsubscribe(\"APP_STATE_UPDATE\",this.handleAppStateUpdate),o.default.unsubscribe(\"DRAWER_OPEN\",this.handleDrawerOpen),o.default.unsubscribe(\"DRAWER_CLOSE\",this.handleDrawerClose),o.default.unsubscribe(\"WINDOW_FOCUS\",this.handleWindowFocus),this.onTerminate?.(),this.maybeFlushSeenItems(0)},this.handleFeedItemFlush=e=>{let{id:t,force:n}=e;this._id===t&&this.maybeFlushSeenItems(n)},this.handleFeedItemSeen=e=>{let t=e.id,n=e.timestampMillis,s=e.feedItemId;if(t!==this._id)return;if(this._paused){this._pausedFeedItemIds.add(s);return}let a=this.getTrackedFeedItem(s).maybeMarkSeen(n);this.onFeedItemSeen?.(s,a)},this.handleFeedItemUnseen=e=>{let t=e.id,n=e.timestampMillis,s=e.feedItemId;if(t!==this._id)return;this._paused&&this._pausedFeedItemIds.delete(s);let a=this.getTrackedFeedItem(s).maybeMarkUnseen(n);this.onFeedItemUnseen?.(s,a),this.maybeFlushSeenItems()},this.getTrackedFeedItem=e=>(null==this.trackedFeedItems[e]&&(this.trackedFeedItems[e]=new d),this.trackedFeedItems[e]),this.getVisibleFeedItemIds=()=>{let e=Object.keys(this.trackedFeedItems);return new Set(e.filter(e=>this.trackedFeedItems[e]?.isVisible()))},this.handleDrawerClose=()=>{this._isReactNavigationFocused&&this.resume()},this.handleDrawerOpen=()=>{this._isReactNavigationFocused&&this.pause()},this.handleAppStateUpdate=e=>{let{state:t}=e;\"active\"===t&&this._isReactNavigationFocused&&this.resume(),\"background\"===t&&(this._isReactNavigationFocused&&this.pause(),this.maybeFlushSeenItems(0))},this.clearPausedFeedItemIds=()=>{this._pausedFeedItemIds=new Set,this._paused=!1},this.pause=()=>{if(this._paused)return;let e=this.getVisibleFeedItemIds();e.forEach(e=>{this.handleFeedItemUnseen({id:this._id,feedItemId:e,timestampMillis:Date.now(),type:\"ANALYTICS_FEED_ITEM_UNSEEN\"})}),this._paused=!0,this._pausedFeedItemIds=e},this.resume=()=>{this._paused&&(this._paused=!1,this._pausedFeedItemIds.forEach(e=>{this.handleFeedItemSeen({id:this._id,feedItemId:e,timestampMillis:Date.now(),type:\"ANALYTICS_FEED_ITEM_SEEN\"})}),this.clearPausedFeedItemIds())},this.handleReactNavigationFocus=(e,t)=>{this._isReactNavigationFocused=e,this._isReactNavigationFocused&&!t?this.resume():this.pause()},this.handleWindowFocus=e=>{this._windowId===e.windowId&&(e.focused?this.resume():this.pause())},this.trackedFeedItems={},this._id=e,this._windowId=t,this._pausedFeedItemIds=new Set,this._paused=n??!1,this._isReactNavigationFocused=!0,this._lastFlushTimeMillis=Date.now()}maybeFlushSeenItems(e){if(null==e&&Date.now()-this._lastFlushTimeMillis<6e4||1===e&&Date.now()-this._lastFlushTimeMillis<3e3)return Promise.resolve();let t=this.createFlushSeenItemsFunction(e);return null==t?Promise.resolve():(this._lastFlushTimeMillis=Date.now(),0===e||1===e)?new Promise(async e=>{await t(),e()}):new Promise(e=>{setTimeout(async()=>{await t(),e()},100)})}}",
        "AnalyticsFeedTypes": {
            "GUILD_HOME": "guild_home",
            "FORUM_CHANNEL": "forum_channel"
        },
        "ForceFlushType": {
            "0": "IMMEDIATE",
            "1": "IMMEDIATE_WITH_COOLDOWN",
            "2": "IMMEDIATE_WITH_DELAY",
            "IMMEDIATE": 0,
            "IMMEDIATE_WITH_COOLDOWN": 1,
            "IMMEDIATE_WITH_DELAY": 2
        }
    }
}