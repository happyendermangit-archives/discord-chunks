{
    "exports": {
        "default": "class g extends a.PureComponent{constructor(e){super(e),this.containerRef=a.createRef(),this.decorate=this.decorate.bind(this),this.renderElement=this.renderElement.bind(this),this.renderLeaf=this.renderLeaf.bind(this),this.handleOnChange=this.handleOnChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleBeforeInput=this.handleBeforeInput.bind(this),this.handleCompositionStart=this.handleCompositionStart.bind(this),this.handleCompositionEnd=this.handleCompositionEnd.bind(this),this.handleFocusCapture=this.handleFocusCapture.bind(this),this.handleBlurCapture=this.handleBlurCapture.bind(this),this.handleContextMenu=this.handleContextMenu.bind(this),this.handlePasteCapture=this.handlePasteCapture.bind(this),h.EditorUtils.isEditorEmpty(e.editor)?this.state={initialValue:(0,c.createEmptyState)().richValue,showPlaceholder:!0}:this.state={initialValue:h.EditorUtils.richValue(e.editor),showPlaceholder:!1}}componentDidMount(){this.props.editor.events.addListener(\"onChange\",this.handleOnChange)}componentDidUpdate(e,t,n){e.editor!==this.props.editor&&(e.editor.events.removeListener(\"onChange\",this.handleOnChange),this.props.editor.events.addListener(\"onChange\",this.handleOnChange))}componentWillUnmount(){this.props.editor.events.removeListener(\"onChange\",this.handleOnChange)}componentDidCatch(e,t){d.default.captureException(e,{extra:t}),this.setState({initialValue:[...this.props.editor.children]})}decorate(e){let{editor:t,guildId:n,decorateExtra:i}=this.props;return[...(0,_.default)(t,e,n),...(0,E.default)(t,e),...i?.(t,e)??[]]}renderElement(e){let{guildId:t,channelId:n,renderExtraElement:a}=this.props,{attributes:s,children:l}=e;\"rtl\"===s.dir&&(s.style={...s.style,textAlign:\"right\"});let r=a?.(e)??(0,I.default)(e,t,n);return null!=r?r:(0,i.jsx)(\"div\",{...s,children:l})}renderLeaf(e){let{editor:t,renderExtraLeaf:n}=this.props,{attributes:a,children:s}=e,l=n?.(e)??(0,C.default)(t,e);return null!=l?l:(0,i.jsx)(\"span\",{...a,children:s})}handleOnChange(){let{editor:e}=this.props,t=h.EditorUtils.isEditorEmpty(e)&&null==e.composition;if(t!==this.state.showPlaceholder&&this.setState({showPlaceholder:t}),this.props.onChange?.(h.EditorUtils.richValue(e)),!1===this.props.canFocus){let t=r.ReactEditor.findDocumentOrShadowRoot(e).getSelection();null!=t&&this.isSelectionPartiallyInside(t)&&t?.removeAllRanges()}}handleKeyDown(e){if(null!=this.props.editor.composition){e.preventDefault(),e.stopPropagation();return}this.props.onKeyDown?.(e)}handleKeyUp(e){if(null!=this.props.editor.composition){e.preventDefault(),e.stopPropagation();return}this.props.onKeyUp?.(e)}handleBeforeInput(e){let{editor:t}=this.props,n=r.ReactEditor.findDocumentOrShadowRoot(t).getSelection(),i=null!=n&&n.rangeCount>0?n.getRangeAt(0):null,a=e.getTargetRanges()[0]??null;if(null==t.composition){if((\"insertText\"===e.inputType||\"insertReplacementText\"===e.inputType)&&(null==a&&(a=i),null!=a)){let n=h.EditorUtils.toSlateRange(t,a,{exactMatch:!1,suppressThrow:!0});null!=n&&null!=e.data&&(h.RangeUtils.isExpanded(n)?f.HistoryUtils.withSingleEntry(t,()=>{t.selection=n,t.deleteFragment(),t.insertText(e.data),e.preventDefault()}):(t.insertText(e.data),e.preventDefault()))}if(e.inputType.startsWith(\"deleteContent\")&&null!=i&&!i.collapsed){let n=h.EditorUtils.toSlateRange(t,i,{exactMatch:!0,suppressThrow:!0});null!=n&&h.RangeUtils.isExpanded(n)&&(t.selection=n,t.deleteFragment(e.inputType.endsWith(\"Backward\")?\"backward\":\"forward\"),e.preventDefault())}}}handleCompositionStart(){let{editor:e}=this.props,t={insertedPrefix:!1,startedInsideInline:!1};this.state.showPlaceholder&&this.setState({showPlaceholder:!1});let n=null!=e.selection&&h.RangeUtils.isCollapsed(e.selection)?h.EditorUtils.leaf(e,e.selection.anchor.path):null;if(null==n){e.composition=t;return}if(null!=(null!=e.selection&&h.RangeUtils.isCollapsed(e.selection)?h.EditorUtils.above(e,{at:n[1],match:t=>h.EditorUtils.isInline(e,t),mode:\"lowest\"}):null)&&(t.startedInsideInline=!0),h.EditorUtils.isEditorEmpty(e)){m.SlateTransforms.insertNodes(e,{text:\"\\uFEFF\"},{select:!0}),t.insertedPrefix=!0,e.composition=t;return}let i=r.ReactEditor.findDocumentOrShadowRoot(this.props.editor).getSelection(),a=(i?.rangeCount??0)>0?i?.getRangeAt(0):null;if(null==(null!=a?h.EditorUtils.toSlateRange(e,a,{exactMatch:!0,suppressThrow:!0}):null)&&null!=a){let t=h.EditorUtils.toSlateRange(e,a,{exactMatch:!1,suppressThrow:!0});e.selection=null,null!=t?m.SlateTransforms.select(e,t):m.SlateTransforms.select(e,e.selection??h.EditorUtils.end(e,[]))}e.composition=t}handleCompositionEnd(e){let{editor:t}=this.props;if(null==t.composition)return;let{insertedPrefix:n}=t.composition;if(n&&null!=t.selection&&h.RangeUtils.isCollapsed(t.selection)){let e=t.selection.anchor.path,n=h.NodeUtils.leaf(t,e);h.EditorUtils.withoutNormalizing(t,()=>{let e=n.text.replace(/^\\uFEFF/,\"\");m.SlateTransforms.delete(t,{unit:\"offset\",distance:n.text.length,reverse:!0}),h.EditorUtils.insertText(t,e)})}t.composition=null}handleFocusCapture(e){let{onFocus:t}=this.props;t?.(e)}handleBlurCapture(e){let{editor:t,onBlur:n}=this.props,i=e.relatedTarget,a=r.ReactEditor.findDocumentOrShadowRoot(this.props.editor),s=a.getElementById(\"textarea-context\"),l=a.getElementById(\"slate-toolbar\");if(null!=i&&!(0,p.hasDomParent)(i,s)&&!(0,p.hasDomParent)(i,l)){let e=r.ReactEditor.findDocumentOrShadowRoot(t).getSelection();null!=e&&this.isSelectionEscaping(e)&&e.removeAllRanges()}n?.(e)}isSelectionPartiallyInside(e){let t=this.containerRef.current;if(null!=e&&null!=t)for(let n=e.rangeCount-1;n>=0;n--){let i=e.getRangeAt(n);if((0,p.hasDomParent)(i.startContainer,t)||!i.collapsed&&(0,p.hasDomParent)(i.endContainer,t))return!0}return!1}isSelectionEscaping(e){let t=this.containerRef.current,n=!1,i=!1;if(null!=e&&null!=t)for(let a=e.rangeCount-1;a>=0;a--){let s=e.getRangeAt(a);if((0,p.hasDomParent)(s.startContainer,t)){if(i)return!0;n=!0}else{if(n)return!0;i=!0}if(!s.collapsed){if((0,p.hasDomParent)(s.startContainer,t)){if(i)return!0;n=!0}else{if(n)return!0;i=!0}}}return!1}handleContextMenu(e){let{editor:t}=this.props,a=e.pageY,s=window.innerHeight;u.isPlatformEmbedded?(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el(\"685305@21304:21354\").then(n.bind(n,\"925367\"));return n=>(0,i.jsx)(e,{...n,editor:t,text:h.EditorUtils.getSelectedText(t,!0)})},{align:null!=a&&null!=s&&a<s/2?\"top\":\"bottom\",enableSpellCheck:!0}):blur()}handlePasteCapture(e){let{editor:t,onPaste:n}=this.props;n?.(e),!(e.isDefaultPrevented()||e.isPropagationStopped())&&(t.insertData(e.clipboardData),e.preventDefault(),e.stopPropagation())}render(){let{editor:e,className:t,containerClassName:n,canFocus:a,autoFocus:s,placeholder:o,channelId:u,guildId:d,onChange:c,onFocus:f,onBlur:p,onKeyDown:m,onKeyUp:h,decorateExtra:E,renderExtraElement:_,renderExtraLeaf:I,...C}=this.props;return(0,i.jsxs)(\"div\",{ref:this.containerRef,className:n,children:[this.state.showPlaceholder?(0,i.jsx)(\"div\",{className:l()(y.placeholder,t),\"aria-hidden\":!0,children:o}):null,(0,i.jsx)(r.Slate,{editor:e,value:[...this.state.initialValue],children:(0,i.jsx)(r.Editable,{...C,className:l()(S.markup,y.editor,t),decorate:this.decorate,renderElement:this.renderElement,renderLeaf:this.renderLeaf,onFocusCapture:this.handleFocusCapture,onBlurCapture:this.handleBlurCapture,onContextMenu:this.handleContextMenu,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onDOMBeforeInput:this.handleBeforeInput,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,onPasteCapture:this.handlePasteCapture,autoFocus:s&&!1!==a,autoCorrect:\"off\",\"data-can-focus\":!1!==a,\"aria-label\":o,\"aria-multiline\":!0})})]})}}"
    }
}