{
    "exports": {
        "default": {
            "initializedCount": 0,
            "actions": {
                "QUESTS_ENROLL_SUCCESS": "e=>{let{enrolledQuestUserStatus:{questId:t}}=e,n=a.default.getStreamerActiveStreamMetadata();if(null==n||null==n.pid)return;let i=r.default.getGameForPID(n.pid);if(null==i||null==i.id)return;let s=(0,d.getQuestByApplicationId)(c.default.quests,i.id);if(null==s||s.id!==t)return;let _=a.default.getCurrentUserActiveStream();null!=_&&this.initiateHeartbeat({streamKey:(0,o.encodeStreamKey)(_),applicationId:s.config.applicationId,questId:s.id})}",
                "QUESTS_SEND_HEARTBEAT_SUCCESS": "e=>{let{streamKey:t,userStatus:n}=e;null!=n.completedAt&&this.terminateHeartbeat(t)}",
                "POST_CONNECTION_OPEN": "()=>{if(0===c.default.lastFetchedCurrentQuests)window.setTimeout(this.maybeFetchCurrentQuests,Math.floor(Math.random()*N))}",
                "RUNNING_GAMES_CHANGE": "()=>{!(this.instantiatedAt+O>Date.now()||c.default.lastFetchedCurrentQuests+O>Date.now())&&this.maybeFetchCurrentQuests()}",
                "STREAM_START": "e=>{let{streamType:t,guildId:n,channelId:i,pid:l}=e,I=null!=l?r.default.getGameForPID(l):null;if(null==I)return;let T=null!=I.id?(0,d.getQuestByApplicationId)(c.default.quests,I.id):null;if(T?.userStatus?.enrolledAt==null||T?.userStatus?.completedAt!=null)return;(0,u.trackQuestEvent)(T.id,A.AnalyticEvents.QUEST_STREAMING_STARTED,{media_session_id:E.default.getMediaSessionId(),channel_type:_.default.getChannel(i)?.type,guild_id:n});let S=(0,o.encodeStreamKey)({streamType:t,guildId:n,channelId:i,ownerId:s.default.getId()});0!==a.default.getViewerIds(S).length&&this.initiateHeartbeat({streamKey:S,applicationId:T.config.applicationId,questId:T.id})}",
                "STREAM_CLOSE": "e=>{let{streamKey:t}=e;this.terminateHeartbeat(t)}",
                "STREAM_UPDATE": "e=>{let{streamKey:t,viewerIds:n}=e,i=a.default.getStreamerActiveStreamMetadataForStream(t);if(null==i||null==i.pid)return;let o=r.default.getGameForPID(i.pid);if(null==o||null==o.id)return;let s=(0,d.getQuestByApplicationId)(c.default.quests,o.id);if(s?.userStatus?.enrolledAt!=null&&s?.userStatus?.completedAt==null){if(0===n.length){this.sendHeartbeatTimeoutIds.has(t)&&((0,I.sendHeartbeat)({questId:s.id,streamKey:t,applicationId:o.id}),this.terminateHeartbeat(t));return}this.initiateHeartbeat({streamKey:t,applicationId:s.config.applicationId,questId:s.id})}}"
            },
            "stores": {
                "toJSON": "function(){return Array.from(this)}",
                "get": "function get() { [native code] }",
                "set": "function set() { [native code] }",
                "has": "function has() { [native code] }",
                "delete": "function delete() { [native code] }",
                "clear": "function clear() { [native code] }",
                "entries": "function entries() { [native code] }",
                "forEach": "function forEach() { [native code] }",
                "keys": "function keys() { [native code] }",
                "size": 0,
                "values": "function values() { [native code] }"
            },
            "instantiatedAt": 1709154273466,
            "sendHeartbeatTimeoutIds": {
                "toJSON": "function(){return Array.from(this)}",
                "get": "function get() { [native code] }",
                "set": "function set() { [native code] }",
                "has": "function has() { [native code] }",
                "delete": "function delete() { [native code] }",
                "clear": "function clear() { [native code] }",
                "entries": "function entries() { [native code] }",
                "forEach": "function forEach() { [native code] }",
                "keys": "function keys() { [native code] }",
                "size": 0,
                "values": "function values() { [native code] }"
            },
            "initiateHeartbeat": "e=>{let{questId:t,streamKey:n,applicationId:i}=e;window.clearTimeout(this.sendHeartbeatTimeoutIds.get(n));let r=()=>{(null!=a.default.getRTCStream(n)||a.default.getViewerIds(n).length>0)&&(0,I.sendHeartbeat)({questId:t,streamKey:n,applicationId:i});let e=this.calculateHeartbeatDurationMs(i);this.sendHeartbeatTimeoutIds.set(n,window.setTimeout(r,e))};r()}",
            "calculateHeartbeatDurationMs": "e=>{let t=c.default.quests.get(e);if(null==t||null==t.config||null==t.userStatus)return R;let{streamProgressSeconds:n}=t.userStatus,i=60*t.config.streamDurationRequirementMinutes;return i-n<=.1*i?C:R}",
            "terminateHeartbeat": "e=>{window.clearTimeout(this.sendHeartbeatTimeoutIds.get(e)),this.sendHeartbeatTimeoutIds.delete(e)}",
            "handleEnrollmentSuccess": "e=>{let{enrolledQuestUserStatus:{questId:t}}=e,n=a.default.getStreamerActiveStreamMetadata();if(null==n||null==n.pid)return;let i=r.default.getGameForPID(n.pid);if(null==i||null==i.id)return;let s=(0,d.getQuestByApplicationId)(c.default.quests,i.id);if(null==s||s.id!==t)return;let _=a.default.getCurrentUserActiveStream();null!=_&&this.initiateHeartbeat({streamKey:(0,o.encodeStreamKey)(_),applicationId:s.config.applicationId,questId:s.id})}",
            "handlePostConnectionOpen": "()=>{if(0===c.default.lastFetchedCurrentQuests)window.setTimeout(this.maybeFetchCurrentQuests,Math.floor(Math.random()*N))}",
            "handleSendHeartbeatSuccess": "e=>{let{streamKey:t,userStatus:n}=e;null!=n.completedAt&&this.terminateHeartbeat(t)}",
            "handleRunningGamesChange": "()=>{!(this.instantiatedAt+O>Date.now()||c.default.lastFetchedCurrentQuests+O>Date.now())&&this.maybeFetchCurrentQuests()}",
            "handleStreamUpdate": "e=>{let{streamKey:t,viewerIds:n}=e,i=a.default.getStreamerActiveStreamMetadataForStream(t);if(null==i||null==i.pid)return;let o=r.default.getGameForPID(i.pid);if(null==o||null==o.id)return;let s=(0,d.getQuestByApplicationId)(c.default.quests,o.id);if(s?.userStatus?.enrolledAt!=null&&s?.userStatus?.completedAt==null){if(0===n.length){this.sendHeartbeatTimeoutIds.has(t)&&((0,I.sendHeartbeat)({questId:s.id,streamKey:t,applicationId:o.id}),this.terminateHeartbeat(t));return}this.initiateHeartbeat({streamKey:t,applicationId:s.config.applicationId,questId:s.id})}}",
            "handleStreamStart": "e=>{let{streamType:t,guildId:n,channelId:i,pid:l}=e,I=null!=l?r.default.getGameForPID(l):null;if(null==I)return;let T=null!=I.id?(0,d.getQuestByApplicationId)(c.default.quests,I.id):null;if(T?.userStatus?.enrolledAt==null||T?.userStatus?.completedAt!=null)return;(0,u.trackQuestEvent)(T.id,A.AnalyticEvents.QUEST_STREAMING_STARTED,{media_session_id:E.default.getMediaSessionId(),channel_type:_.default.getChannel(i)?.type,guild_id:n});let S=(0,o.encodeStreamKey)({streamType:t,guildId:n,channelId:i,ownerId:s.default.getId()});0!==a.default.getViewerIds(S).length&&this.initiateHeartbeat({streamKey:S,applicationId:T.config.applicationId,questId:T.id})}",
            "handleStreamClose": "e=>{let{streamKey:t}=e;this.terminateHeartbeat(t)}",
            "maybeFetchCurrentQuests": "maybeFetchCurrentQuests(){(0,T.getIsEligibleForQuests)({location:S.QuestsExperimentLocations.QUESTS_MANAGER,autoTrackExposure:!1})&&!c.default.isFetchingCurrentQuests&&(0,I.fetchCurrentQuests)()}"
        }
    }
}