{
    "exports": {
        "default": "function y(e,t,n,d){let{insertData:m,isInline:p,isVoid:h,onChange:y,deleteBackward:b,deleteForward:j,deleteFragment:U}=e;e.insertData=n=>{if(null!=t&&T.EditorUtils.isEditorEmpty(e)&&n.types.includes(\"application/x-discord-interaction-data\")){let e=JSON.parse(n.getData(\"application/x-discord-interaction-data\")),{commandKey:d,interactionOptions:c}=(0,u.extractInteractionDataProps)(e),{application:f,command:m}=s.getCachedCommand(t,d);if(null!=m){var l,r;let e=null!=f?{type:o.ApplicationCommandSectionType.APPLICATION,id:f.id,icon:f.icon,name:null!==(r=null===(l=f.bot)||void 0===l?void 0:l.username)&&void 0!==r?r:f.name,application:f}:null;return i.setActiveCommand({channelId:t.id,command:m,section:e,location:o.ApplicationCommandTriggerLocations.PASTE,initialValues:(0,a.getInitialValuesFromInteractionOptions)(m,null!=c?c:[])}),null}}return m(n)},e.isInline=e=>!!_.has(e.type)||p(e),e.isVoid=e=>!!(\"applicationCommandOption\"===e.type&&N.has(e.optionType))||h(e),e.deleteBackward=t=>{L(e,()=>b(t))},e.deleteForward=t=>{L(e,()=>j(t))},e.deleteFragment=t=>{L(e,()=>U(t))};let D=null,k=null,w=null,F=null,G=null;return e.onChange=()=>{if(null!=t){var a;let u=r.default.getState(t.id),m=T.EditorUtils.getFirstText(e),p=(0,c.getCommandQuery)(t,null!==(a=null==m?void 0:m.text)&&void 0!==a?a:\"\"),h=s.getChangeKeys(t,l.ApplicationCommandType.CHAT,p.text);if(T.EditorUtils.richValue(e)!==D||!T.SelectionUtils.equals(e.selection,k)||u.activeCommand!==w||null==G||h.some((e,t)=>G[t]!==e)){let a=g.HistoryUtils.withMergedEntry(e,()=>{var a;return function(e){let{editor:t,storeCommandState:n,channel:a,canUseCommands:r,canOnlyUseTextCommands:u,commandChanged:d,previousOptionValues:m}=e,{command:p,commandText:h}=M(t),g=n.activeCommand;if(!r||u&&(null==g?void 0:g.inputType)!==o.ApplicationCommandInputType.BUILT_IN_TEXT&&(null==g?void 0:g.inputType)!==o.ApplicationCommandInputType.BUILT_IN_INTEGRATION)return null!=p&&x(t,a.id,g,!0),null;if(null!=p){if(T.EditorUtils.isEditorEmpty(t)||null==g)return x(t,a.id,g,!1),null;let e=\"\".concat(I.COMMAND_SENTINEL).concat(p.displayName);if(null==h||!h.startsWith(e)||0===E.getOptionNames(t).length&&(h.length<e.length+1||\" \"!==h[e.length]))return x(t,a.id,g,!0),null}else{if(null!=g&&d){let e=function(e,t,n){var l,i,a,s,r;let o;let{initialValues:u,activeCommand:d}=n;if(null==d)return null;let c=(null!==(a=null===(l=d.options)||void 0===l?void 0:l.length)&&void 0!==a?a:0)>0?E.findTextOptions(e,d):null,m=(0,S.toTextValue)(T.EditorUtils.richValue(e),{mode:\"raw\",range:{anchor:T.EditorUtils.start(e,[]),focus:null!==(s=null==c?void 0:null===(i=c[0])||void 0===i?void 0:i.keyRange.anchor)&&void 0!==s?s:T.EditorUtils.end(e,[])}}),p=\"\",h=m.toLocaleLowerCase(),g=f.PREFIX_COMMAND_REGEX.exec(h);null!=g&&(h=I.COMMAND_SENTINEL+h.substring(g.length));let _=\"\".concat(I.COMMAND_SENTINEL).concat(d.displayName).toLocaleLowerCase(),A=\"\".concat(I.COMMAND_SENTINEL).concat(d.name).toLocaleLowerCase();h.startsWith(_)&&h.length>_.length?p=m.substring(_.length).trim():h.startsWith(A)&&h.length>A.length&&(p=m.substring(A.length).trim());let y=[],x=null,R=null;if(null!=d.options){let e=new Set;if(null!=c)for(let l of c){e.add(l.name);let i=null!==(r=P(n,t,l.name))&&void 0!==r?r:l.text,a={type:\"applicationCommandOption\",optionName:l.name,optionDisplayName:l.displayName,optionType:l.type,children:[{text:i}]};y.push(a),0===l.text.length&&null==x&&(x=a)}for(let l of d.options)if(!e.has(l.name)&&(l.required||null!=u[l.name])){let e,i;p.length>0&&!N.has(l.type)?(e=p,p=\"\"):e=null!=(i=P(n,t,l.name))?i:\"\";let a={type:\"applicationCommandOption\",optionName:l.name,optionDisplayName:l.displayName,optionType:l.type,children:[{text:e}]};y.push(a),0===e.length&&null==x&&(x=a),null==i&&(R=a)}}o=p.length>0?\"\".concat(I.COMMAND_SENTINEL).concat(d.displayName,\" \").concat(p.replace(/\\r|\\n/g,\" \")):0===y.length?\"\".concat(I.COMMAND_SENTINEL).concat(d.displayName,\" \"):\"\".concat(I.COMMAND_SENTINEL).concat(d.displayName),y.unshift({text:o});let M={type:\"applicationCommand\",children:y,command:{id:d.id,name:d.name,displayName:d.displayName}};T.EditorUtils.withoutNormalizing(e,()=>{for(let[,t]of(C.SlateTransforms.insertNodes(e,[M],{at:v.FIRST_BLOCK_PATH}),T.EditorUtils.blocks(e).reverse()))T.PathUtils.isAfter(t,v.FIRST_BLOCK_PATH)&&C.SlateTransforms.removeNodes(e,{at:t,voids:!0})});let L=null;return null!=x?(C.SlateTransforms.selectCommandOption(e,x.optionName),L=x.optionName):null!=R?(C.SlateTransforms.selectCommandOption(e,R.optionName,!1),L=R.optionName):C.SlateTransforms.resetSelectionToEnd(e),null==R&&O(e,d),L}(t,a,n),l=E.getOptionValues(t,g);return R({guildId:a.guild_id,channelId:a.id,command:g,activeOption:e,currentOptionValues:l,previousOptionValues:null,validateAll:!0,allowEmpty:!0}),{commandId:g.id,optionValues:l}}if(null!=g&&!d)return i.setActiveCommand({channelId:a.id,command:null,section:null}),null;let e=T.EditorUtils.richValue(t),r=e[0],u=r.children[0];if(A.has(r.type)&&T.TextUtils.isText(u)){let e=function(e,t){if(!e.startsWith(\"/\"))return null;let n=(0,c.getCommandQuery)(t,e.substring(1));if(!n.hasSpaceTerminator)return null;let{commands:i,sections:a}=s.getCachedResults(t,l.ApplicationCommandType.CHAT,n.text);if(0===i.length)return null;let r=n.text.trim(),u=r+\" \",d=i.filter(e=>e.inputType!==o.ApplicationCommandInputType.PLACEHOLDER&&(e.displayName===r||e.displayName.startsWith(u)));if(1===d.length&&d[0].displayName===r){let e=d[0],t=a.find(t=>{var n;return(null===(n=t.application)||void 0===n?void 0:n.id)===e.applicationId});return{command:e,section:t}}return null}(u.text,a);if(null!=e)return i.setActiveCommand({channelId:a.id,command:e.command,section:e.section}),null}}if(null!=g&&null!=p){var _;!function(e,t){if(null==t.options||0===t.options.length)return!1;let n=E.findTextOptions(e,t);return 0!==n.length&&(T.EditorUtils.withoutNormalizing(e,()=>{for(let t=n.length-1;t>=0;t--){let l=n[t];C.SlateTransforms.textToInline(e,{type:\"applicationCommandOption\",optionName:l.name,optionDisplayName:l.displayName,optionType:l.type,children:[{text:l.text}]},{anchor:l.keyRange.anchor,focus:l.valueRange.focus})}let t=T.EditorUtils.getFirstText(e);if(null==t)return!1;let l=t.text.trim();t.text!==l&&C.SlateTransforms.textToText(e,l,{anchor:{path:v.FIRST_TEXT_PATH,offset:0},focus:{path:v.FIRST_TEXT_PATH,offset:t.text.length}})}),!0)}(t,g)&&O(t,g);let e=E.getOptionValues(t,g),n=T.EditorUtils.above(t,{match:e=>T.EditorUtils.isInline(t,e)&&\"applicationCommandOption\"===e.type,mode:\"lowest\"}),l=null!==(_=null==n?void 0:n[0].optionName)&&void 0!==_?_:null;return R({guildId:a.guild_id,channelId:a.id,command:g,activeOption:l,currentOptionValues:e,previousOptionValues:m,validateAll:!1,allowEmpty:!1}),{commandId:p.id,optionValues:e}}return null}({editor:e,storeCommandState:u,channel:t,canUseCommands:n,canOnlyUseTextCommands:d,commandChanged:(null===(a=u.activeCommand)||void 0===a?void 0:a.id)!==(null==w?void 0:w.id),previousOptionValues:F})});if(null!=a){let t=g.HistoryUtils.currentEntry(e);null!=t&&(t.commandId=a.commandId),F=a.optionValues}else F=null;D=T.EditorUtils.richValue(e),k=e.selection,w=u.activeCommand,G=h}}y()},e}",
        "unsetCommand": "function x(e,t,n,l){let[a]=T.EditorUtils.blocks(e)[0],s=l?(0,S.serializeDescendant)(a,{mode:\"plain\"}).trimEnd():\"\",r=s.split(\"\\n\").map(e=>({type:\"line\",children:[{text:e}]})),o=[r.length-1];for(let[,t]of(C.SlateTransforms.insertNodes(e,r,{at:v.FIRST_BLOCK_PATH}),T.EditorUtils.blocks(e).reverse()))T.PathUtils.isAfter(t,o)&&C.SlateTransforms.removeNodes(e,{at:t,voids:!0});null!=n&&i.setActiveCommand({channelId:t,command:null,section:null})}"
    }
}