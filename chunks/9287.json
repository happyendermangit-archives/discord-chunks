{
    "exports": {
        "default": "async function w(e){let{command:t,optionValues:n,context:i,commandTargetId:l,maxSizeCallback:u,commandOrigin:d=M.CommandOrigin.CHAT}=e;null==i.autocomplete&&s.default.dispatch({type:\"APPLICATION_COMMAND_USED\",context:i,command:t}),await _.default.unarchiveThreadIfNecessary(i.channel.id);let p=[],m=[],h=(0,v.getCommandAttachmentDraftType)(d);if(null!=t.options)for(let e of t.options){if(e.type===o.ApplicationCommandOptionType.SUB_COMMAND||e.type===o.ApplicationCommandOptionType.SUB_COMMAND_GROUP||!(e.name in n))continue;let t=i.autocomplete?.name===e.name||void 0,s=null;if(e.type===o.ApplicationCommandOptionType.STRING){let l=O.getOptionalString(n,e.name)?.trim()??\"\";s=null!=e.choices?D(e.choices,l):e.autocomplete?U(e,l,i):l,a()(null!=i.autocomplete||null!=s,`Option \"${e.name}\" expects a value`),null!=s&&p.push({type:e.type,name:e.name,value:s,focused:t});continue}if(e.type===o.ApplicationCommandOptionType.ATTACHMENT){if(null!=i.autocomplete)continue;let n=y.default.getUpload(i.channel.id,e.name,h);if(null==n)continue;let a=y.default.getUploads(i.channel.id,h).findIndex(e=>n.id===e.id);m.push(n),s=a,p.push({type:e.type,name:e.name,value:s,focused:t});continue}let l=O.filterEmpty(n[e.name]);if(a()(null!=i.autocomplete||1===l.length,`Option \"${e.name}\" expects a single option type`),null==l[0]&&!t)continue;let r=l[0]??{type:\"text\",text:\"\"};switch(e.type){case o.ApplicationCommandOptionType.CHANNEL:if(\"channelMention\"===r.type)s=r.channelId;else if(\"text\"===r.type){if((0,v.isSnowflake)(r.text))s=r.text.trim();else{let e=(0,f.resolveApplicationCommandOption)(r.text,i.guild?.id,i.channel.id);a()(e?.type===\"channelMention\",`Failed to resolve ${r.text}`),s=e.channelId}}break;case o.ApplicationCommandOptionType.ROLE:if(\"roleMention\"===r.type)s=r.roleId;else if(\"text\"===r.type){if((0,v.isSnowflake)(r.text))s=r.text.trim();else{let e=(0,f.resolveApplicationCommandOption)(r.text,i.guild?.id,i.channel.id,{allowUsers:!1});a()(e?.type===\"roleMention\",`Failed to resolve ${r.text}`),s=e.roleId}}else\"textMention\"===r.type&&\"@everyone\"===r.text&&(s=i.guild?.id);break;case o.ApplicationCommandOptionType.USER:if(\"userMention\"===r.type)s=r.userId;else if(\"text\"===r.type){if((0,v.isSnowflake)(r.text))s=r.text.trim();else{let e=(0,f.resolveApplicationCommandOption)(r.text,i.guild?.id,i.channel.id,{allowRoles:!1});a()(e?.type===\"userMention\",`Failed to resolve ${r.text}`),s=e.userId}}break;case o.ApplicationCommandOptionType.MENTIONABLE:if(\"userMention\"===r.type)s=r.userId;else if(\"roleMention\"===r.type)s=r.roleId;else if(\"textMention\"===r.type&&\"@everyone\"===r.text)s=i.guild?.id;else if(\"text\"===r.type){if((0,v.isSnowflake)(r.text))s=r.text.trim();else{let e=(0,f.resolveApplicationCommandOption)(r.text,i.guild?.id,i.channel.id);e?.type===\"userMention\"?s=e.userId:e?.type===\"roleMention\"?s=e.roleId:e?.type===\"textMention\"&&\"@everyone\"===e.text?s=i.guild?.id:a()(!1,`Failed to resolve ${r.text}`)}}break;case o.ApplicationCommandOptionType.BOOLEAN:\"text\"===r.type&&(s=j(r.text.trim()));break;case o.ApplicationCommandOptionType.INTEGER:if(\"text\"===r.type){let t=r.text.trim();s=null!=e.choices?Number(D(e.choices,t)):e.autocomplete?U(e,t,i,Number):Number(O.normalizeNumericString(I.default.locale,t))}break;case o.ApplicationCommandOptionType.NUMBER:if(\"text\"===r.type){let t=r.text.trim();s=null!=e.choices?Number(D(e.choices,t)):e.autocomplete?U(e,t,i,Number):Number(O.normalizeNumericString(I.default.locale,t))}break;default:a()(!1,`Unsupported option type: ${e.type}`);continue}a()(null!=i.autocomplete||null!=s,`Unexpected value for option \"${e.name}\"`),null!=s&&p.push({type:e.type,name:e.name,value:s,focused:t})}if(null!=t.subCommandPath)for(let e=t.subCommandPath.length-1;e>=0;e-=1){let{name:n,type:i}=t.subCommandPath[e];p=[{type:i,name:n,options:p}]}if(null!=t.execute)return c.default.trackWithMetadata(P.AnalyticEvents.APPLICATION_COMMAND_USED,{command_id:t.id,application_id:t.applicationId,command_type:t.type,location:d===M.CommandOrigin.APPLICATION_LAUNCHER?M.ApplicationCommandTriggerLocations.APP_LAUNCHER:M.ApplicationCommandTriggerLocations.SLASH_UI}),t.execute(p,i);if(t.inputType===M.ApplicationCommandInputType.BUILT_IN||t.inputType===M.ApplicationCommandInputType.BUILT_IN_TEXT||t.inputType===M.ApplicationCommandInputType.BUILT_IN_INTEGRATION)return;let E={version:t.version,id:t.rootCommand?.id??t.id,guild_id:t.guildId,name:t.rootCommand?.name??t.name,type:t.type,options:p,application_command:t.rootCommand};null!=l&&(E.target_id=l),null!=i.autocomplete?(0,A.performAutocomplete)(t,i,E):(r.default.clearAll(i.channel.id,h),B({applicationId:t.applicationId,data:E,context:i,attachments:m,maxSizeCallback:u,onMessageSuccess:()=>{F(n)},commandDisplayName:t.displayName,analytics_location:d===M.CommandOrigin.APPLICATION_LAUNCHER?M.ApplicationCommandTriggerLocations.APP_LAUNCHER:M.ApplicationCommandTriggerLocations.SLASH_UI}))}",
        "retryCommandMessage": "(e,t,n)=>{if(e.isCommandType()){let i=t.guild_id;null!=e.interactionData&&B({applicationId:n,data:e.interactionData,context:{channel:t,guild:null!=i?C.default.getGuild(i):null}})}}"
    }
}