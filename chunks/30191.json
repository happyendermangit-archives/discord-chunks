{
    "exports": {
        "default": {
            "type": "function(e){var t,n,s,c,T,A;let N,{src:O,volume:R=1,onVolumeChange:M,onMute:v,waveform:L,durationSecs:P,onVolumeShow:b,onVolumeHide:k,onPlay:D,onPause:U,onError:j}=e,w=a.useRef(null),[F,G]=a.useState(0),[B,H]=a.useState(P),[V,Y]=a.useState(!1),[K,W]=a.useState(!1),[z,J]=a.useState(!1),[Z,$]=a.useState(!1),[q,X]=a.useState(\"none\"),[Q,ee]=a.useState(()=>\"function\"==typeof R?R():R),et=a.useRef(void 0),en=a.useCallback(()=>{W(e=>!e)},[]),ei=a.useCallback(()=>{X(\"metadata\")},[]),ea=a.useCallback(e=>{let t=e.currentTarget.duration;!isNaN(t)&&H(t)},[]),es=a.useCallback(()=>{W(!1),null==et.current&&(et.current=setTimeout(()=>{$(!1),et.current=void 0},500))},[]),el=a.useCallback(()=>{!z&&es()},[es,z]),er=a.useCallback(()=>{let e=w.current;if(null==e)return;let t=e.error;j?.(t)},[j]),eo=a.useCallback(e=>{let t=(0,_.perceptualToAmplitude)(e,1);Y(0===t),ee(t),M?.(t)},[M]),eu=a.useCallback(()=>{Y(!V),v?.(!V)},[V,v]),ed=a.useCallback(()=>{J(!0)},[]),ec=a.useCallback(()=>{J(!1),F===B&&es()},[F,B,es]),ef=a.useCallback(e=>{let t=w.current;if(null==B||null==t)return;let n=e*B;G(n),t.currentTime=n,$(!0),clearTimeout(et.current),et.current=void 0},[B]);a.useEffect(()=>{!Z&&K&&$(!0)},[K,Z]);let ep=a.useRef(null);a.useEffect(()=>{if(Z||K){if(K)ep.current=performance.now(),D?.(!1,F,(w.current?.duration??0)*E.default.Millis.SECOND);else{let e=performance.now(),t=ep.current;U?.(F,null!=t?(e-t)/1e3:0),ep.current=null}}},[K]),t=w,n=K,s=G,a.useEffect(()=>{let e;return!function i(){let a=t.current;if(null!=a)s(a.currentTime),n&&(e=requestAnimationFrame(i))}(),()=>{null!=e&&cancelAnimationFrame(e)}},[t,n,s]),c=O,T=K,A=W,a.useEffect(()=>{if(T)return h.ComponentDispatch.dispatch(C.ComponentActions.VOICE_MESSAGE_PLAYBACK_STARTED,{src:c}),h.ComponentDispatch.subscribe(C.ComponentActions.VOICE_MESSAGE_PLAYBACK_STARTED,e),()=>{h.ComponentDispatch.unsubscribe(C.ComponentActions.VOICE_MESSAGE_PLAYBACK_STARTED,e)};function e(e){let{src:t}=e;c!==t&&A(!1)}},[c,T,A]);let em=K?p.default:m.default,eh=K?y.default.Messages.PAUSE:y.default.Messages.PLAY;N=\"Safari\"===platform.name?(0,i.jsx)(a.Suspense,{children:(0,i.jsx)(g,{ref:w,className:S.audioElement,src:O,preload:q,playing:K&&!z,onEnded:el,onLoadedMetadata:ea,onError:er,muted:V,volume:Q})}):(0,i.jsx)(d.default,{ref:w,className:S.audioElement,controls:!1,preload:q,onEnded:el,onLoadedMetadata:ea,onError:er,muted:V,volume:Q,playing:K&&!z,children:(0,i.jsx)(\"source\",{src:O})});let eE=(0,r.useStateFromStores)([u.default],()=>u.default.useReducedMotion),{enabled:e_}=(0,o.useRedesignIconContext)();return(0,i.jsxs)(\"div\",{className:l()(S.container,{[S.playing]:K}),onMouseEnter:ei,children:[(0,i.jsx)(\"div\",{className:S.rippleContainer,children:(0,i.jsx)(\"div\",{className:l()(S.ripple,{[S.reducedMotion]:eE})})}),(0,i.jsx)(o.Clickable,{className:S.playButtonContainer,onClick:en,\"aria-label\":eh,children:(0,i.jsx)(em,{className:l()(S.playIcon,{[S.oldPlayIconSpacing]:!e_&&!K}),width:18,height:18})}),(0,i.jsx)(I.default,{className:S.waveform,waveform:L,currentTime:F,duration:B??1,playing:K,played:Z,onDrag:ef,onDragStart:ed,onDragEnd:ec}),(0,i.jsx)(x,{played:Z,currentTime:F,duration:B}),(0,i.jsx)(f.default,{className:S.volumeButton,iconClassName:S.volumeButtonIcon,sliderWrapperClassName:S.volumeSlider,muted:V,value:(0,_.amplitudeToPerceptual)(Q,1),minValue:0,maxValue:1,currentWindow:window,onValueChange:eo,onToggleMute:eu,onVolumeShow:b,onVolumeHide:k}),N]})}",
            "compare": null
        }
    }
}