{
    "exports": {
        "ConfettiCanvas": {
            "render": "function(t,e){var a=t.className,o=t.environment,l=t.onClick,d=t.onMouseDown,f=t.onMouseMove,p=t.onMouseUp,v=t.onBeforeRender,y=t.onAfterRender,R=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,[\"className\",\"environment\",\"onClick\",\"onMouseDown\",\"onMouseMove\",\"onMouseUp\",\"onBeforeRender\",\"onAfterRender\"]),V=i.useRef(null),P=i.useRef(new Map),F=i.useRef(null),D=i.useRef(0),E=i.useRef(0),M=i.useCallback(function(){var t=V.current;if(null!=t){var e=t.getContext(\"2d\");if(null!=e){e.clearRect(0,0,t.width,t.height),null==v||v(e),P.current.forEach(function(n,i){var r=n.confetti,a=n.spriteCanvas;r.update(o),r.draw(a,e),r.shouldDestroy(t,o)&&P.current.delete(i)}),null==y||y(e),P.current.size>0?F.current=window.requestAnimationFrame(M):(e.clearRect(0,0,t.width,t.height),F.current=null);var n=Date.now();0!==D.current&&(E.current=1e3/(n-D.current)),D.current=n}}},[o,y,v]);i.useEffect(function(){null!=F.current&&(window.cancelAnimationFrame(F.current),F.current=window.requestAnimationFrame(M))},[M]);var O=i.useCallback(function(t,e){P.current.set(t.id,{confetti:t,spriteCanvas:e}),null==F.current&&M()},[M]),U=i.useCallback(function(t,e,n,i,a){var o,u,l,d,f,p,v,y,R,V,P,F,D,E,M,U=(o=null!==(M=t.id)&&void 0!==M?M:(0,r.v4)(),u=t,l=n,d=i,f=a,y=_((v=(p=u,h(h({id:o},s),p))).size),V=(R=function(t,e){if(null!=t){var n=e.sprites.findIndex(function(e){return\"string\"==typeof t?e.src===t&&e.colorize:e.src===t.src&&e.colorize===t.colorize});if(-1!==n)return[t,n]}return C(e.sprites)}(d,l))[0],P=R[1],F=function(t,e,n){if(!(\"string\"==typeof(i=t)||i.colorize))return 0;var i,r=null!=e?n.colors.findIndex(function(t){return t===e}):-1;return -1!==r?r:Math.floor(b(0,n.colors.length-1))}(null!=d?d:V,f,l),new c({id:o,position:_(v.position),velocity:_(v.velocity),rotation:(D=v.rotation,function(t){switch(t.type){case\"static\":var e=k(t.value);return new m(new w(e.x),new w(e.y),new w(e.z));case\"static-random\":var n=k(t.minValue),i=k(t.maxValue);return new m(new w(b(n.x,i.x)),new w(b(n.y,i.y)),new w(b(n.z,i.z)));case\"linear\":e=k(t.value);var r=k(t.addValue);return new m(new x(e.x,r.x),new x(e.y,r.y),new x(e.z,r.z));case\"linear-random\":n=k(t.minValue),i=k(t.maxValue);var a=k(t.minAddValue),o=k(t.maxAddValue);return new m(new x(b(n.x,i.x),b(a.x,o.x)),new x(b(n.y,i.y),b(a.y,o.y)),new x(b(n.z,i.z),b(a.z,o.z)));case\"oscillating\":e=k(t.value);var u=k(t.start),l=k(t.final),c=k(t.duration),s=k(t.direction);return new m(new g(e.x,u.x,l.x,c.x,s.x,t.easingFunction),new g(e.y,u.y,l.y,c.z,s.y,t.easingFunction),new g(e.z,u.z,l.z,c.z,s.z,t.easingFunction));case\"oscillating-random\":n=k(t.minValue),i=k(t.maxValue);var d=k(t.minStart),f=k(t.maxStart),p=k(t.minFinal),h=k(t.maxFinal),v=k(t.minDuration),y=k(t.maxDuration),R=k(t.minDirection),_=k(t.maxDirection);return new m(new g(b(n.x,i.x),b(d.x,f.x),b(p.x,h.x),b(v.x,y.x),z(R.x,_.x),C(t.easingFunctions)[0]),new g(b(n.y,i.y),b(d.y,f.y),b(p.y,h.y),b(v.y,y.y),z(R.y,_.y),C(t.easingFunctions)[0]),new g(b(n.z,i.z),b(d.z,f.z),b(p.z,h.z),b(v.z,y.z),z(R.z,_.z),C(t.easingFunctions)[0]))}}(h(h({},D),{valueType:\"Vector3\"}))),dragCoefficient:_(v.dragCoefficient),size:y,opacity:(E=v.opacity,function(t){switch(t.type){case\"static\":return new w(t.value);case\"static-random\":return new w(b(t.minValue,t.maxValue));case\"linear\":return new x(t.value,t.addValue);case\"linear-random\":return new x(b(t.minValue,t.maxValue),b(t.minAddValue,t.maxAddValue));case\"oscillating\":return new g(t.value,t.start,t.final,t.duration,t.direction,t.easingFunction);case\"oscillating-random\":return new g(b(t.minValue,t.maxValue),b(t.minStart,t.maxStart),b(t.minFinal,t.maxFinal),b(t.minDuration,t.maxDuration),z(t.minDirection,t.maxDirection),C(t.easingFunctions)[0])}}(h(h({},E),{valueType:\"number\"}))),spriteX:F*l.spriteWidth+2*F,spriteY:P*l.spriteHeight+2*P,spriteWidth:l.spriteWidth,spriteHeight:l.spriteHeight}));return O(U,e),U},[O]),S=i.useCallback(function(t){P.current.delete(t)},[]),A=i.useCallback(function(){return P.current.clear()},[]),H=i.useCallback(function(){return V.current},[]);i.useImperativeHandle(e,function(){return{createConfetti:U,addConfetti:O,deleteConfetti:S,clearConfetti:A,getCanvas:H}},[U,O,S,A,H]);var j=i.useCallback(function(t,e){var n,i,r=e.clickHandler,a=e.mouseHandler;if(null!=r||null!=a){var l=null===(n=V.current)||void 0===n?void 0:n.getBoundingClientRect();if(null!=l){var c=function(t,e){if(null==e)throw Error(\"element should not be null\");var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}(t,V.current);if(u(c,{x:l.left,y:l.top,width:l.width,height:l.height})){if(null!=a)return a(t);if(null!=r){var s=-1e3/E.current*2,d=function(t,e){for(var n=0,i=Array.from(t.values());n<i.length;n++){var r=i[n];if(null!=r&&e(r))return r}return null}(P.current,function(t){var e=t.confetti,n=e.previewPositionUpdate(o,s);return u(c,{x:n.x-e.width/2,y:n.y-e.height/2,width:e.width,height:e.height})});r(t,null!==(i=null==d?void 0:d.confetti)&&void 0!==i?i:null)}}}}},[o]),N=i.useCallback(function(t){return j(t,{clickHandler:l})},[j,l]),I=i.useCallback(function(t){return j(t,{clickHandler:d})},[j,d]),L=i.useCallback(function(t){return j(t,{mouseHandler:f})},[j,f]),T=i.useCallback(function(t){return j(t,{mouseHandler:p})},[j,p]);return i.useEffect(function(){var t=function(t,e,n){null!=n&&window.addEventListener(t,e)};return t(\"click\",N,l),t(\"mousedown\",I,d),t(\"mousemove\",L,f),t(\"mouseup\",T,p),function(){window.removeEventListener(\"click\",N),window.removeEventListener(\"mousedown\",I),window.removeEventListener(\"mousemove\",L),window.removeEventListener(\"mouseup\",L)}},[N,I,L,T,l,d,f,p]),i.useEffect(function(){var t=V.current,e=new ResizeObserver(function(){!function(t){if(null!=t){var e=t.getBoundingClientRect(),i=e.width,r=e.height;t.width=i*n.g.devicePixelRatio,t.height=r*n.g.devicePixelRatio}}(V.current)});return null!=t&&e.observe(t),function(){null!=t&&e.unobserve(t)}},[]),i.createElement(\"canvas\",h({},R,{className:a,ref:V}))}"
        },
        "Environment": "function(t){var e=void 0===t?{}:t,n=e.gravity,i=e.wind;this.gravity=-9.8,this.wind=0,this.gravity=null!=n?n:this.gravity,this.wind=null!=i?i:this.wind}",
        "SpriteCanvas": {
            "render": "function(t,e){var n,a=t.className,u=t.visible,l=t.sprites,c=t.colors,s=t.spriteWidth,d=t.spriteHeight,f=i.useRef(null),p=i.useRef([]),h=i.useRef(!1),v=i.useRef({});i.useImperativeHandle(e,function(){return{getCanvas:function(){return f.current},getCreateData:function(){return{sprites:p.current,colors:c,spriteWidth:s,spriteHeight:d}},addReadyListener:function(t){var e=(0,r.v4)();return v.current[e]=t,e},removeReadyListener:function(t){delete v.current[t]},isReady:h.current}},[c,d,s]);var y=i.useCallback(function(){var t=f.current,e=null==t?void 0:t.getContext(\"2d\",{willReadFrequently:!0});null!=e&&null!=t&&(e.clearRect(0,0,t.width,t.height),p.current.forEach(function(t,n){var i=function(i,r){var a=s*r+2*r,o=d*n+2*n;if(e.drawImage(t.image,a,o,s,d),null!=i){for(var u,l,c=e.getImageData(a,o,s,d),f=(\"#\"===(u=i)[0]&&(u=u.slice(1)),{r:(l=parseInt(u,16))>>16&255,g:l>>8&255,b:255&l}),p=0;p<c.data.length;p+=4)c.data[p]=f.r,c.data[p+1]=f.g,c.data[p+2]=f.b;e.putImageData(c,a,o)}};t.colorize?c.forEach(function(t,e){return i(t,e)}):i(null,0)}))},[c,d,s]),m=i.useCallback(function(){var t=l.map(function(t){var e=new Image,n=\"string\"==typeof t?t:t.src,i=\"string\"==typeof t||t.colorize;e.src=n;var r=new Promise(function(t){e.onload=t});return{colorize:i,image:e,src:n,loadPromise:r}});return Promise.all(t.map(function(t){return t.loadPromise})).then(function(){p.current=t.map(function(t){return{colorize:t.colorize,image:t.image,src:t.src}})})},[l]),w=i.useCallback(function(t){for(var e in v.current)v.current[e](t)},[]),x=i.useCallback(function(){var t,e,n,i;return t=void 0,e=void 0,n=void 0,i=function(){return function(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(l){return function(u){if(n)throw TypeError(\"Generator is already executing.\");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&u[0]?i.return:u[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,u[1])).done)return r;switch(i=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,i=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){o.label=u[1];break}if(6===u[0]&&o.label<r[1]){o.label=r[1],r=u;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(u);break}r[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],i=0}finally{n=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}(this,function(t){switch(t.label){case 0:return[4,m()];case 1:return t.sent(),y(),h.current=!0,w(!0),[2]}})},new(n||(n=Promise))(function(r,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function u(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,u)}l((i=i.apply(t,e||[])).next())})},[w,m,y]);return i.useEffect(function(){x()},[x]),i.useEffect(function(){return function(){return w(!1)}},[w]),i.useEffect(function(){null!=f.current&&(f.current.width=(s+2)*Math.max(c.length,1),f.current.height=(d+2)*l.length)},[c.length,d,s,l.length]),i.createElement(\"canvas\",{ref:f,className:o(a,((n={})[\"SpriteCanvas-module_spriteCanvasHidden__ndzQV\"]=!(void 0!==u&&u),n))})}"
        },
        "useConfettiCannon": "function F(t,e){var n,r=i.useState(null!==(n=null==e?void 0:e.isReady)&&void 0!==n&&n),a=r[0],o=r[1];i.useEffect(function(){var t=null==e?void 0:e.addReadyListener(o);return function(){null!=t&&(null==e||e.removeReadyListener(t))}},[e]);var u=i.useCallback(function(n,i){var r=void 0===i?{}:i,a=r.sprite,o=r.color,u=null==e?void 0:e.getCreateData(),l=null==e?void 0:e.getCanvas();if(null!=l&&null!=u&&0!==u.sprites.length)return null==t?void 0:t.createConfetti(n,l,u,a,o)},[t,e]),l=i.useCallback(function(t,e,n){for(var i=[],r=0;r<e;r++){var a=u(t,n);a&&i.push(a)}return i},[u]),c=i.useCallback(function(n){var i=null==e?void 0:e.getCanvas();null!=i&&(null==t||t.addConfetti(n,i))},[t,e]),s=i.useCallback(function(e){null==t||t.deleteConfetti(e)},[t]),d=i.useCallback(function(){return null==t?void 0:t.clearConfetti()},[t]);return i.useMemo(function(){return{createConfetti:u,createMultipleConfetti:l,addConfetti:c,clearConfetti:d,deleteConfetti:s,isReady:a&&null!=e&&null!=t}},[c,d,t,u,l,s,a,e])}"
    }
}