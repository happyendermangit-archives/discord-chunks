{
    "exports": {
        "Dao": "class o{get prefix(){return this.table.prefix}constructor(e,t,n,i=!0){this.originalPrefix=e,this.table=new r.Table([e],t,n,i)}withoutLogging(){return new o(this.originalPrefix,this.table.tableId,this.table.database,!1)}get(e){return this.table.get([e])}getMany(e){return this.table.getMany([],e)}getRange(e,t,n){return this.table.getRange([e],[t],n)}getKvEntries(){return this.table.getKvEntries()}getMapEntries(){return this.table.getMapEntries()}getIds(){return this.table.getChildIds([])}getParentId(e){return this.table.getParentId([null,e])}put(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.ConflictOptions.Replace;return this.table.put({key:[e],data:t,generation:null},n)}delete(e){return 0==arguments.length?this.table.delete():this.table.delete([e])}transaction(e,t){return this.table.transaction(t=>e(new a(t)),t)}upgradeTransaction(e){return new a(this.table.upgradeTransaction(e))}getManySyncUnsafe(e){return this.table.getManySyncUnsafe([],e)}getMapEntriesSyncUnsafe(){return this.table.getMapEntriesSyncUnsafe()}}",
        "Database": "class s{static async open(e,t){return new s(await r.Host.open(e,t))}static openSyncUnsafe(e,t){return new s(r.Host.openSyncUnsafe(e,t))}static delete(e){return r.Host.delete(e)}constructor(e){this.raw=e,this.name=e.name,this.lastState=a.DatabaseState.Open,this.handle=e.handle,this.databaseStateCallback=o.Runtime.addDatabaseStateCallback((e,t)=>{this.handle===e&&(this.lastState=t)})}close(){this.lastState=a.DatabaseState.Closed,this.raw?.close(),this.raw=null,o.Runtime.removeCompletionCallback(this.databaseStateCallback)}disable(e){return null==this.raw?Promise.resolve():(this.lastState=a.DatabaseState.Disabled,this.execute({type:\"db.disable\",handle:0,reason:e}))}execute(e,t){if(null==this.raw)throw Error(`database is no longer open (database: ${this}`);let n=\"key\"in e?e.key[0]:e.table,r=()=>o.Runtime.executeAsync(t??e.type,t=>{this.raw.execute(t,{...e,handle:0})});return null===t?r():i.default.timeAsync(\"\\uD83D\\uDCBE\",`${t??e.type} ${n??\"\"}`,r)}executeSync(e){if(null==this.raw)throw Error(`database is no longer open (database: ${this}`);let t=\"key\"in e?e.key[0]:e.table;return i.default.time(\"\\uD83D\\uDCBE\",`SYNC: ${e.type} ${t??\"\"}`,()=>this.raw.execute(null,{...e,handle:0},{synchronous:!0}))}fullVacuum(){return this.execute({type:\"db.vacuum\",handle:0,complete:!0})}fsInfo(){return this.execute({type:\"db.fs_info\",handle:0})}incrementalVacuum(){return this.execute({type:\"db.vacuum\",handle:0,complete:!1})}instantaneousState(){return null==this.raw?a.DatabaseState.Closed:this.lastState=this.executeSync({type:\"db.state\"})}async instantaneousStateAsync(){return null==this.raw?a.DatabaseState.Closed:this.lastState=await this.execute({type:\"db.state\"})}state(){return this.lastState}transaction(e,t){let n=new _(this);return Promise.resolve(e(n)).then(()=>n.operations.length>0?this.execute({type:\"db.transaction\",operations:n.complete()},t):Promise.resolve())}toString(){return`[Database #${this.handle}: ${this.name}]`}}",
        "EntityDao": "class o{get prefix(){return this.table.prefix}constructor(e,t,n,i=!0){this.originalPrefix=e,this.table=new r.Table([e],t,n,i)}withoutLogging(){return new o(this.originalPrefix,this.table.tableId,this.table.database,!1)}get(e){return this.table.get([e])}getMany(e){return this.table.getMany([],e)}getRange(e,t,n){return this.table.getRange([e],[t],n)}getKvEntries(){return this.table.getKvEntries()}getMapEntries(){return this.table.getMapEntries()}getIds(){return this.table.getChildIds([])}getParentId(e){return this.table.getParentId([null,e])}put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;return this.transaction(n=>n.put(e,t),`${this.prefix} put`)}putAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;return this.transaction(n=>n.putAll(e,t),`${this.prefix} putAll`)}replaceAll(e){return this.transaction(t=>t.replaceAll(e),`${this.prefix} replaceAll`)}delete(e){return this.transaction(t=>t.delete(e),`${this.prefix} delete`)}transaction(e,t){return this.table.transaction(t=>e(new a(t)),t)}upgradeTransaction(e){return new a(this.table.upgradeTransaction(e))}getManySyncUnsafe(e){return this.table.getManySyncUnsafe([],e)}getMapEntriesSyncUnsafe(){return this.table.getMapEntriesSyncUnsafe()}static cell(e,t){return{key:[e.id],data:e,generation:t}}}",
        "GuildDao": "class o{get prefix(){return this.table.prefix}constructor(e,t,n,i=!0){this.originalPrefix=e,this.table=new r.Table([e],t,n,i)}withoutLogging(){return new o(this.originalPrefix,this.table.tableId,this.table.database,!1)}get(e,t){return this.table.get([e,t])}getMany(e,t){return this.table.getMany([e],t)}getRange(e,t,n,i){return this.table.getRange([e,t],[e,n],i)}getKvEntries(){return this.table.getKvEntries()}getMapEntries(){return this.table.getMapEntries()}getIds(e){return this.table.getChildIds([e])}getGuildIds(){return this.table.getChildIds([])}getGuildId(e){return this.table.getParentId([null,e])}put(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.ConflictOptions.Replace;return this.putWithGeneration(e,t,n,null,r)}putWithGeneration(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.ConflictOptions.Replace;return this.table.put({key:[e,t],data:n,generation:r},o)}delete(e,t){switch(arguments.length){case 0:return this.table.delete([]);case 1:return this.table.delete([e]);default:return this.table.delete([e,t])}}deleteGeneration(e,t){return this.table.deleteGeneration([],e,t)}transaction(e,t){return this.table.transaction(t=>e(new a(t)),t)}upgradeTransaction(e){return new a(this.table.upgradeTransaction(e))}getManySyncUnsafe(e,t){return this.table.getManySyncUnsafe([e],t)}getMapEntriesSyncUnsafe(){return this.table.getMapEntriesSyncUnsafe()}}",
        "GuildEntityDao": "class o{get prefix(){return this.table.prefix}constructor(e,t,n,i=!0){this.originalPrefix=e,this.table=new r.Table([e],t,n,i)}withoutLogging(){return new o(this.originalPrefix,this.table.tableId,this.table.database,!1)}get(e,t){return this.table.get([e,t])}getMany(e,t){return this.table.getMany([e],t)}getRange(e,t,n,i){return this.table.getRange([e,t],[e,n],i)}getKvEntries(){return this.table.getKvEntries()}getMapEntries(){return this.table.getMapEntries()}getIds(e){return this.table.getChildIds([e])}getGuildIds(){return this.table.getChildIds([])}getGuildId(e){return this.table.getParentId([null,e])}put(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.ConflictOptions.Replace;return this.transaction(i=>i.put(e,t,n),`${this.prefix} put`)}putAll(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.ConflictOptions.Replace;return this.transaction(i=>i.putAll(e,t,n),`${this.prefix} putAll`)}replaceAll(e,t){return this.transaction(n=>n.replaceAll(e,t),`${this.prefix} replaceAll`)}delete(e,t){return this.transaction(n=>n.delete(e,t),`${this.prefix} delete`)}deleteGeneration(e,t){return this.transaction(n=>n.deleteGeneration(e,t),`${this.prefix} deleteGeneration`)}transaction(e,t){return this.table.transaction(t=>e(new a(t)),t)}upgradeTransaction(e){return new a(this.table.upgradeTransaction(e))}getManySyncUnsafe(e,t){return this.table.getManySyncUnsafe([e],t)}getMapEntriesSyncUnsafe(){return this.table.getMapEntriesSyncUnsafe()}static cell(e,t,n){return{key:[e,t.id],data:t,generation:n}}}",
        "MessageDao": "class o{get prefix(){return this.table.prefix}constructor(e,t,n,i=!0){this.originalPrefix=e,this.table=new r.Table([e],t,n,i)}withoutLogging(){return new o(this.originalPrefix,this.table.tableId,this.table.database,!1)}get(e,t,n){return this.table.get([e,t,_(n)])}getLatest(e,t,n){return this.table.getMany([e,t],{ordering:i.Ordering.Descending,limit:n})}getRange(e,t,n,i,r){return this.table.getRange([e,t,_(n)],[e,t,_(i)],r)}getMostRecents(e){return this.table.messages.getLatest(e)}put(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.ConflictOptions.Replace;return this.table.put(s(e,t,n),r)}putAll(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.ConflictOptions.Replace,o=n.map(n=>s(e,t,n));return this.table.putAll(o,r)}deleteAll(){return this.table.delete()}deleteGuild(e){return this.table.delete([e])}deleteChannel(e,t){return this.table.delete([e,t])}deleteMessage(e,t,n){return this.table.delete([e,t,_(n)])}transaction(e,t){return this.table.transaction(t=>e(new a(t)),t)}upgradeTransaction(e){return new a(this.table.upgradeTransaction(e))}}",
        "Table": "class s{constructor(e,t,n,i){this.messages={getLatest:e=>this.database.execute({type:\"messages.get_latest\",table:this.tableId,guildId:e},this.defaultDebugTag)},this.prefix=e,this.tableId=t,this.database=n,this.defaultDebugTag=i?void 0:null}close(){this.database.close()}async get(e){return(await this.getMany(e,{limit:1}))[0]??null}getMany(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return this.database.execute({type:\"kv.get_many\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e),ordering:t?.ordering,limit:t?.limit},this.defaultDebugTag)}getRange(e,t,n){let i=(0,r.combineKey)(this.prefix,e),o=(0,r.combineKey)(this.prefix,t);return this.database.execute({type:\"kv.get_range\",table:this.tableId,range:[i,o],ordering:n?.ordering,limit:n?.limit},this.defaultDebugTag)}getKvEntries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.execute({type:\"kv.get_kv_entries\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)},this.defaultDebugTag)}getMapEntries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.execute({type:\"kv.get_map_entries\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)},this.defaultDebugTag)}getChildIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.execute({type:\"kv.get_child_ids\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)},this.defaultDebugTag)}getParentId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.execute({type:\"kv.get_parent_id\",table:this.tableId,key:(0,r.combineKey)(this.prefix,e)},this.defaultDebugTag)}put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;return this.database.execute({type:\"kv.put_one\",table:this.tableId,cell:o(e,this.prefix),overwrite:t===i.ConflictOptions.Replace},this.defaultDebugTag)}putAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;return this.database.execute({type:\"kv.put_many\",table:this.tableId,cells:a(e,this.prefix),overwrite:t===i.ConflictOptions.Replace},this.defaultDebugTag)}replaceAll(e){return this.transaction(t=>{t.delete(),t.putAll(e)},this.defaultDebugTag)}delete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.execute({type:\"kv.delete_many\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)},this.defaultDebugTag)}deleteRange(e,t){let n=(0,r.combineKey)(this.prefix,e),i=(0,r.combineKey)(this.prefix,t);return this.database.execute({type:\"kv.delete_range\",table:this.tableId,range:[n,i]},this.defaultDebugTag)}deleteGeneration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.database.execute({type:\"kv.delete_generation\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e),generation:n,comparer:t},this.defaultDebugTag)}transaction(e,t){return this.database.transaction(t=>e(new _(this.prefix,this.tableId,t)),t)}upgradeTransaction(e){return new _(this.prefix,this.tableId,e)}getManySyncUnsafe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return this.database.executeSync({type:\"kv.get_many\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e),ordering:t?.ordering,limit:t?.limit})}getMapEntriesSyncUnsafe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.database.executeSync({type:\"kv.get_map_entries\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)})}}",
        "TableTransaction": "class _{static fromDatabaseTransaction(e,t,n){return new _(e,t,n)}constructor(e,t,n){this.messages={trimOrphans:e=>{if(1!==this.prefix.length||1!==e.length)throw Error(\"trimOrphans: only one prefix component is supported at this time\");this.transaction.add({type:\"messages.trim_orphans\",table:this.tableId,channelKey:e[0],messageKey:this.prefix[0]})},trimChannel:(e,t)=>{this.transaction.add({type:\"messages.trim_channel\",table:this.tableId,key:(0,r.combineKey)(this.prefix,e),limit:t})},trimChannelsIn:(e,t)=>{if(1!==this.prefix.length||1!==e.length)throw Error(\"trimChannelsIn: only one prefix component is supported at this time\");this.transaction.add({type:\"messages.trim_channels_in\",table:this.tableId,channelKey:e[0],messageKey:this.prefix[0],limit:t})},trimChannelsNotIn:(e,t)=>{if(1!==this.prefix.length||1!==e.length)throw Error(\"trimChannelsNotIn: only one prefix component is supported at this time\");this.transaction.add({type:\"messages.trim_channels_not_in\",table:this.tableId,channelKey:e[0],messageKey:this.prefix[0],limit:t})}},this.prefix=e,this.tableId=t,this.transaction=n}put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;this.transaction.add({type:\"kv.put_one\",table:this.tableId,cell:o(e,this.prefix),overwrite:t===i.ConflictOptions.Replace})}putAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ConflictOptions.Replace;this.transaction.add({type:\"kv.put_many\",table:this.tableId,cells:a(e,this.prefix),overwrite:t===i.ConflictOptions.Replace})}replaceAll(e){this.delete(),this.putAll(e)}delete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.transaction.add({type:\"kv.delete_many\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e)})}deleteRange(e,t){let n=(0,r.combineKey)(this.prefix,e),i=(0,r.combineKey)(this.prefix,t);this.transaction.add({type:\"kv.delete_range\",table:this.tableId,range:[n,i]})}deleteGeneration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.transaction.add({type:\"kv.delete_generation\",table:this.tableId,key:(0,r.combineKeyPrefix)(this.prefix,e),generation:n,comparer:t})}}",
        "ConflictOptions": {
            "0": "Skip",
            "1": "Replace",
            "Skip": 0,
            "Replace": 1
        },
        "DatabaseState": {
            "0": "Closed",
            "1": "Open",
            "2": "Disabled",
            "Closed": 0,
            "Open": 1,
            "Disabled": 2
        },
        "MAXIMUM_KEY_BITS": 5,
        "Ordering": {
            "0": "Ascending",
            "1": "Descending",
            "Ascending": 0,
            "Descending": 1
        },
        "TableId": {
            "Kv": "kv",
            "KvCache": "kv_cache",
            "Messages": "messages"
        }
    }
}