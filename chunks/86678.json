{
    "exports": {
        "default": {
            "type": {
                "render": "function(e,t){var n,a;let r,{pickerIntention:o,channel:u,guildId:f,closePopout:p,emojiSize:A=J.EmojiSize.MEDIUM,hasTabWrapper:O=!1,includeCreateEmojiButton:k,onSelectEmoji:el,containerWidth:ed,onNavigateAway:ec,persistSearch:ef,className:em,headerClassName:ep,analyticsOverride:eh=eu,searchProps:eE={},wrapper:eg,shouldHidePickerActions:eS=!1,messageId:eC,renderHeader:eT,listHeaderClassName:ev}=e,{onFocus:eI,onKeyDown:e_,autoFocus:eN=!0,accessory:eA}=eE,ex=(0,d.useStateFromStores)([b.default],()=>null!=f?b.default.getDefaultChannel(f):null,[f]),[ey,eO]=i.useState(null),eR=i.useRef(\"\"),eM=(0,N.useExpressionPickerStore)(e=>e.searchQuery),eL=i.useRef(null),eP=i.useRef(null),eb=i.useRef(null);null==u&&null!=ex&&(u=ex);let ej=null!==(a=null!==(n=null==u?void 0:u.getGuildId())&&void 0!==n?n:f)&&void 0!==a?a:null,[eU,eD]=i.useState(!1),ek=j.default.getCurrentUser(),ew=(0,D.isPremium)(ek);i.useImperativeHandle(t,()=>({onPickerOpen:e3}));let{location:eF}=(0,E.useAnalyticsContext)(),{page:eG,section:eB,object:eH,openPopoutType:eV}=eh,eK=i.useMemo(()=>({...eF,section:null!=eB?eB:q.AnalyticsSections.EMOJI_PICKER_POPOUT}),[eF,eB]),{AnalyticsLocationProvider:eW}=(0,S.default)(g.default.EMOJI_PICKER),{diversitySurrogate:eY}=(0,d.useStateFromStoresObject)([T.default],()=>({diversitySurrogate:T.default.diversitySurrogate})),ez=(0,w.useEmojiSearchResults)(eM,u,o),eZ=null==ez?0:ez.locked.length+ez.unlocked.length,eJ=P.EmojiPickerCollapsedSections.useSetting(),eq=i.useMemo(()=>new Set(eJ),[eJ]),eX=i.useCallback(e=>{P.EmojiPickerCollapsedSections.updateSetting(Array.from(e))},[]),eQ=(0,x.useExpressionPickerGridWidth)({gridWrapperRef:eL,containerWidth:ed,listPaddingLeft:et,listScrollbarWidth:8}),{rowCountBySection:e$,sectionDescriptors:e0,emojiGrid:e1,columnCounts:e2}=(0,K.useEmojiGrid)({gridWidth:eQ,channel:u,includeCreateEmojiButton:k,pickerIntention:o,emojiSearchResults:ez,collapsedSections:eq,emojiPaddingHorizontal:ee,emojiSpriteSize:A}),{newlyAddedEmojis:e4}=(0,F.default)(ej,o),{trackOnPickerOpen:e8}=(0,w.useTrackEmojiPickerOpened)({intention:o,isBurstReaction:eU,analyticsObject:eH});(0,M.useMaybeFetchPremiumLikelihood)(L.default);let e3=i.useCallback(()=>{let e=e4.length>0?e4[0].id:null;(0,I.updateNewlyAddedLastSeen)(ej,e),e8()},[e8,e4,ej]),e6=(0,K.useEmojiSelectHandler)({pickerIntention:o,selectedChannel:u,closePopout:p,onSelectEmoji:el,setUpsellConfigs:eO,emojiSelectAnalytics:e=>{\"\"!==eM?(0,w.trackEmojiSearchSelect)({emoji:e.emoji,location:{...eK,object:q.AnalyticsObjects.EMOJI},searchQuery:eM,intention:o}):(0,w.trackEmojiSelect)({emoji:e.emoji,location:{...eK,object:null!=eH?eH:q.AnalyticsObjects.EMOJI,...null!=eG&&{page:eG}},pickerIntention:o,category:e.category,subCategory:e.subCategory,position:e.columnIndex+1,newlyAddedHighlight:e.subCategory===J.EmojiSubCategory.NEWLY_ADDED_EMOJI&&v.default.isNewerThanLastSeen(ej,e.emoji.id),isBurstReaction:eU})},trackEmojiFavorited:e=>{(0,w.trackEmojiFavorited)({emoji:e.emoji,location:{...eK,object:q.AnalyticsObjects.EMOJI}})}}),e9=i.useCallback(()=>{p(),null==ec||ec()},[p,ec]),{getItemProps:e7,getRowProps:e5,gridContainerProps:te,handleGridContainerKeyDown:tt,isUsingKeyboardNavigation:tn}=ei({pickerIntention:o,analyticsLocation:eK,columnCounts:e2,onSelectEmoji:el,emojiGrid:e1,emojiList:eP,channelGuildId:ej,isBurstReaction:eU});ea(ed,eP),es(ed,eY,eb,eN),i.useEffect(()=>{!ef&&(0,N.setSearchQuery)(\"\")},[ef]),i.useEffect(()=>(U.default.track(q.AnalyticEvents.OPEN_POPOUT,{type:null!=eV?eV:\"Emoji Picker\",guild_id:ej}),_.EmojiPickerStore.resetStoreState),[eV,ej]),i.useEffect(()=>()=>(0,R.hideHotspot)(R.HotspotLocations.FAVORITE_EMOJI_TOOLTIP),[]),i.useLayoutEffect(()=>{var e;let{columnIndex:t,rowIndex:n}=_.EmojiPickerStore.getState().inspectedExpressionPosition;(null===(e=e1[n])||void 0===e?void 0:e[t])==null&&0!==t&&_.EmojiPickerStore.setInspectedExpressionPosition(0,0)},[e1]),i.useEffect(()=>{if(\"\"===eR.current&&\"\"!==eM&&(0,w.trackEmojiSearchStart)(eK,o),0===eZ&&\"\"!==eM)er(eK,eM);else if(\"\"!==eM&&eR.current!==eM){var e;eo(eZ,null!==(e=null==ez?void 0:ez.locked.length)&&void 0!==e?e:0,eK,eM,o)}eR.current=eM},[eM,eK,eZ,ez,o]);let tl=null!=eg?eg:O?\"div\":m.Dialog,ti=null!=eQ;(null==ey?void 0:ey.type)===K.EmojiUpsellType.PREMIUM?r=(0,l.jsx)(Z.default,{onLearnMore:e9,emojiDescriptor:ey.emojiDescriptor,pickerIntention:o,analyticsLocation:eK,onClose:()=>eO(null),channel:u}):(null==ey?void 0:ey.type)===K.EmojiUpsellType.ROLE_SUBSCRIPTION?r=(0,l.jsx)(y.default,{onClose:()=>eO(null),guildId:ey.guildId,emojiId:ey.emojiId}):eU&&!ew&&(r=(0,l.jsx)(G.default,{onDismiss:()=>eD(!1)}));let ta=(0,l.jsx)(V.default,{pickerIntention:o,emojiListRef:eP,onKeyDown:e=>{null==tt||tt(e),null==e_||e_(e)},searchBarRef:eb,onFocus:eI,autoFocus:eN,accessory:eA,headerClassName:ep,hasTabWrapper:O,diversitySurrogate:eY,isBurstReaction:eU,onBurstReactionToggle:()=>eD(!eU),renderHeader:eT}),ts=[];o===Q.EmojiIntention.REACTION&&ts.push(c.DismissibleContent.SUPER_REACTIONS_NITRO_MARKETING),!T.default.hasFavoriteEmojis(ej)&&ts.push(c.DismissibleContent.EMOJI_PICKER_FAVORITE_EMOJIS_TIP);let tr=(0,l.jsx)(h.default,{...eK,children:(0,l.jsxs)(tl,{id:J.EMOJI_PICKER_TAB_PANEL_ID,\"aria-labelledby\":O?J.EMOJI_PICKER_TAB_ID:void 0,role:O?\"tabpanel\":void 0,className:s($.wrapper,{[$.emojiPickerHasTabWrapper]:O,[$.isBurstReactionPicker]:eU&&ew}),children:[O?null:ta,(0,l.jsxs)(\"div\",{className:s($.emojiPicker,em),onScroll:en,children:[O?ta:null,(0,l.jsxs)(\"div\",{className:$.bodyWrapper,ref:eL,children:[(0,l.jsx)(z.default,{channel:u,closePopout:p}),(0,l.jsx)(C.default,{contentTypes:ts,children:e=>{let{visibleContent:t,markAsDismissed:n}=e;if(t===c.DismissibleContent.EMOJI_PICKER_FAVORITE_EMOJIS_TIP)return(0,l.jsx)(H.default,{markAsDismissed:()=>n(X.ContentDismissActionType.UNKNOWN)})}}),eS?null:(0,l.jsx)(\"div\",{className:$.emojiPickerListWrapper,id:J.GRID_NAVIGATOR_ID,...te,children:ti?(0,l.jsx)(Y.default,{collapsedSections:eq,diversitySurrogate:eY,emojiGrid:e1,emojiListRef:eP,emojiSize:A,getEmojiItemProps:e7,getEmojiRowProps:e5,gridWidth:eQ,isUsingKeyboardNavigation:tn,onEmojiSelect:(e,t)=>{e6(e,{...t,isBurst:eU})},rowCount:e1.length,rowCountBySection:e$,sectionDescriptors:e0,setCollapsedSections:eX,channelGuildId:ej,messageId:eC,isBurstReaction:eU,listHeaderClassName:ev}):null})]}),(0,l.jsx)(W.EmojiPickerInspector,{emojiGrid:e1,className:$.inspector,guildId:ej,pickerIntention:o,channel:u}),r]}),eS?null:(0,l.jsx)(B.default,{className:$.categoryList,emojiListRef:eP,sectionDescriptors:e0,intention:o,channel:u})]})});return(0,l.jsx)(eW,{children:tr})}"
            },
            "compare": null
        }
    }
}