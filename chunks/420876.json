{
    "exports": {
        "convertSecondsToClockFormat": "function b(e){let t=0|e,n=t%60;return`${(t-n)/60}:${String(n).padStart(2,\"0\")}`}",
        "default": "class w extends a.PureComponent{static #e=this.Types=L;static #t=this.defaultProps={width:400,height:300,forceExternal:!1,playable:!0,downloadable:!0,autoPlay:!1,autoMute:!1,volume:1};static #n=this.minWidth=150;static #i=this.minHeight=110;static getDerivedStateFromProps(e,t){return!e.playable&&t.playing?{playing:!1,hideControls:!1}:null}constructor(e){var t;super(e),t=this,this._unmounted=!1,this._lastMove=0,this.mediaRef=a.createRef(),this.controlsRef=a.createRef(),this.playPausePopRef=a.createRef(),this.handleFullScreenExit=()=>{let{current:e}=this.mediaRef;if(null==e)return;let t=(0,m.getFullScreenNode)(e.parentNode,e);(null==t||!(0,m.isFullScreen)(t))&&this.setState({fullscreen:!1})},this.toggleFullscreen=()=>{let e=!this.state.fullscreen;this.setState({fullscreen:e})},this.setMuted=e=>{this.setState({muted:e})},this.toggleMuted=()=>{this.setMuted(!this.state.muted)},this.setTime=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{current:i}=t.mediaRef;null!=i&&isFinite(i.duration)&&isFinite(i.currentTime)&&(i.currentTime=e,t.updateValue(e/i.duration,n),t.updateTime(e,i.duration))},this.handleUIUpdate=()=>{if(!this.state.playing||this._unmounted)return;let{current:e}=this.mediaRef;null!=e&&(e.duration>0&&this.updateValue(e.currentTime/e.duration),this.updateTime(e.currentTime,e.duration),this.updateControlsVisibility(),requestAnimationFrame(this.handleUIUpdate))},this.handleDrag=(e,t)=>{let{current:n}=this.mediaRef;if(t===E.default.Types.DURATION)null!=n&&isFinite(n.duration)&&this.setTime(n.duration*e,!1);else if(t===E.default.Types.VOLUME){let t=(0,p.perceptualToAmplitude)(e,1);0===t?this.setState({muted:!0,volume:t}):this.state.muted&&t>0?this.setState({muted:!1,volume:t}):this.setState({volume:t})}},this.handleLoaded=()=>{let{current:e}=this.mediaRef;null!=e&&(this.updateTime(e.currentTime,e.duration),this.setState({hasLoadedMetadata:!0,currentTime:e.currentTime,duration:e.duration}))},this.handleDurationChange=()=>{let{current:e}=this.mediaRef;null!=e&&(this.updateTime(e.currentTime,e.duration),this.setState({duration:e.duration}))},this.handleBuffer=o().debounce(()=>{let{current:e}=this.mediaRef;if(null==e){this.setState({buffers:[]});return}this.setState({buffers:function(e){let t=[],{duration:n}=e;for(let i=0;i<e.buffered.length;i++){let a=e.buffered.start(i),s=e.buffered.end(i);if(s-a<1)continue;let l=(s-a)/n,r=a/n;t.push([r,l])}return t}(e)})},400),this.handleEnded=e=>{let{onEnded:t}=this.props;this.setState({playing:!1,hideControls:!1}),null!=t&&t(e)},this.handleMouseMove=()=>{this._lastMove=Date.now()},this.handleMouseLeave=()=>{this.state.playing&&(this._lastMove=0),this.setState({hovering:!1})},this.handleMouseEnter=()=>{\"none\"===this.state.preload&&this.setState({preload:\"metadata\"}),this.setState({hovering:!0})},this.handleVideoClick=e=>{let{state:{hasClickedPlay:t,playing:n},props:{onClick:i,autoPlay:a,autoMute:s}}=this;if(null!=i){i(e);return}e.stopPropagation(),a&&!t&&n&&s?this.setState({muted:!1,hasClickedPlay:!0}):this.setPlay(!this.state.playing)},this.setPlay=e=>{let{props:{autoMute:t},state:{hasClickedPlay:n,muted:i}}=this;e!==this.state.playing&&(e?this.setState({playing:e,hasClickedPlay:!0,muted:(!!n||!t)&&i}):this.setState({playing:!1,hideControls:!1}))},this.handleDragStart=e=>{this.setState({dragging:e})},this.handleDragEnd=()=>{this.setState({dragging:null}),this._lastMove=Date.now()},this.handleKeyDown=e=>{let{current:t}=this.mediaRef;if(e.which===A.KeyboardKeys.SPACE)e.preventDefault(),this.setPlay(!this.state.playing);else if(e.which>=A.KeyboardKeys.DIGIT_0&&e.which<=A.KeyboardKeys.DIGIT_9&&null!=t){e.preventDefault();let n=(e.which-A.KeyboardKeys.DIGIT_0)/10;t.currentTime=t.duration*n,this.setPlay(!0)}};let{autoPlay:n,autoMute:i,volume:s,playable:l}=this.props,r=\"function\"==typeof s?s():s,u=\"function\"==typeof i?i():i;this.state={buffers:[],currentTime:null,dragging:null,duration:null,fullscreen:!1,hasClickedPlay:!1,hasLoadedMetadata:!1,hideControls:!l,muted:u,volume:r,playing:n,preload:\"none\",width:w.minWidth,height:w.minHeight,hovering:!1}}componentDidMount(){let{playing:e,muted:t,volume:n}=this.state,{current:i}=this.mediaRef;null!=i&&(t&&(i.muted=t),e&&(this.play(!0),this.handleUIUpdate()),i.volume=n)}componentDidUpdate(e,t){let{props:{onPause:n,onVolumeChange:i,onMute:a},state:{playing:s,fullscreen:l,muted:r,dragging:o,volume:u}}=this,{current:d}=this.mediaRef,{current:c}=this.playPausePopRef;if(null==d)return;s&&!t.playing?(this.play(),this.handleMouseMove(),this.handleUIUpdate(),t.hasClickedPlay&&c?.pop(s)):!s&&t.playing&&(d.pause(),c?.pop(s),n?.());let f=(0,m.getFullScreenNode)(d.parentNode,d);l&&!t.fullscreen&&null!=f?((0,m.requestFullScreen)(f),f.addEventListener(m.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit)):!l&&t.fullscreen&&null!=f&&(f.removeEventListener(m.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit),(0,m.exitFullScreen)(f)),o===E.default.Types.DURATION&&t.dragging!==E.default.Types.DURATION&&s?d.pause():o!==E.default.Types.DURATION&&t.dragging===E.default.Types.DURATION&&s&&d.play(),r!==t.muted&&(d.muted=r,a?.(r)),u!==t.volume&&(d.volume=u,i?.(u))}componentWillUnmount(){this._unmounted=!0;let{current:e}=this.mediaRef;if(null==e)return;let t=(0,m.getFullScreenNode)(e.parentNode,e);null!=t&&(t.removeEventListener(m.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit),(0,m.exitFullScreen)(t))}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{onPlay:t,volume:n,autoMute:i}=this.props,{current:a}=this.mediaRef;if(null!=a){let s={};if(\"function\"==typeof n){let e=n();e!==this.state.volume&&(a.volume=e,s.volume=e)}if(\"function\"==typeof i){let e=i();e!==this.state.muted&&(a.muted=e,s.muted=e)}this.setState(s),a.play(),t?.(e,a.currentTime*f.default.Millis.SECOND,a.duration*f.default.Millis.SECOND)}}getWidth(){let{width:e}=this.props;return\"100%\"===e?e:Math.max(e,w.minWidth)}getHeight(){let{height:e}=this.props;return\"100%\"===e?e:Math.max(e,w.minHeight)}updateValue(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{current:n}=this.controlsRef;null!=n&&n.updateProgress(e,t)}updateTime(e,t){let n=0|e,i=0|t;(this.state.currentTime!==n||this.state.duration!==i)&&this.setState({currentTime:n,duration:i})}updateControlsVisibility(){let{dragging:e,fullscreen:t}=this.state,n=Math.max(0,Date.now()-this._lastMove)>(t?1e3:3e3);n!==this.state.hideControls&&null==e&&this.setState({hideControls:n})}renderVideo(){let{src:e,poster:t,forceExternal:n,onError:a,responsive:s,mediaLayoutType:l}=this.props,{playing:r,fullscreen:o}=this.state,u=this.getWidth(),d=this.getHeight();return n?(0,i.jsx)(x.default,{className:O.video,controls:!1,height:d,poster:t,width:u,responsive:s&&!o,mediaLayoutType:l,playsInline:!0,autoPlay:r}):(0,i.jsx)(x.default,{className:O.video,controls:!1,playsInline:!0,autoPlay:r,height:d,responsive:s&&!o,mediaLayoutType:o?T.MediaLayoutType.STATIC:l,onClick:this.handleVideoClick,onEnded:this.handleEnded,onError:a,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,poster:t,preload:this.state.preload,ref:this.mediaRef,width:u,src:e})}renderAudio(){return(0,i.jsx)(\"audio\",{className:O.audio,controls:!1,onClick:this.handleVideoClick,onEnded:this.handleEnded,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,preload:this.state.preload,ref:this.mediaRef,children:(0,i.jsx)(\"source\",{src:this.props.src})})}renderControls(){let{current:e}=this.mediaRef,{props:{type:t,autoPlay:n,playable:a=!0,onVolumeShow:s,onVolumeHide:l},state:{buffers:r,currentTime:o,duration:u,hasClickedPlay:d,hideControls:f,muted:h,playing:E,fullscreen:I,volume:C,dragging:y}}=this,S=this.getWidth();return d||n||t===L.AUDIO?(0,i.jsx)(D,{buffers:r,currentTime:o,duration:u,volume:(0,p.amplitudeToPerceptual)(C,1),hide:t===L.VIDEO&&f,muted:h,autoPlay:n,onDrag:this.handleDrag,onDragEnd:this.handleDragEnd,onDragStart:this.handleDragStart,onPause:()=>this.setPlay(!1),onPlay:()=>this.setPlay(!0),onToggleMuted:this.toggleMuted,onVolumeShow:s,onVolumeHide:l,playing:E,dragging:y,type:t,ref:this.controlsRef,width:I?window.screen.width:S,disabled:!a,children:t===L.VIDEO?(0,i.jsx)(c.default,{\"aria-label\":N.default.Messages.TITLE_BAR_FULLSCREEN_WINDOW,className:O.videoButton,guestWindow:window,onClick:this.toggleFullscreen,node:(0,m.getFullScreenNode)(e?.parentNode,e)}):null}):(0,i.jsx)(_.default,{onPlay:this.handleVideoClick,inactive:!a})}renderMetadata(){let{fileName:e,fileSize:t,src:n,type:a,playable:s,mimeType:l}=this.props;return null==e||null==t?null:a===L.AUDIO?(0,i.jsx)(U,{fileName:e,fileSize:t,src:n,disabled:!s,mimeType:l,hideDownloadButton:!0}):null}renderPlayPausePop(){return(0,i.jsx)(j,{ref:this.playPausePopRef})}getMediaStyle(){let{responsive:e,type:t,height:n}=this.props,{fullscreen:i}=this.state,a=this.getWidth();return i?P:t===L.AUDIO?{width:void 0,height:\"auto\"}:e?void 0:{width:a,height:n}}render(){let{height:e,type:t,src:n,forceExternal:a,className:s,renderLinkComponent:r,responsive:o,mediaLayoutType:u,renderOverlayContent:d}=this.props,{fullscreen:c,hideControls:f,playing:p}=this.state,m=O.wrapperPaused;if(t===L.AUDIO?m=O.wrapperAudio:f?m=O.wrapperControlsHidden:p&&(m=O.wrapperPlaying),a&&t===L.VIDEO){let t=this.getWidth();return(0,i.jsxs)(\"div\",{className:l()(m,{[O.wrapperMediaMosaic]:u===T.MediaLayoutType.MOSAIC}),style:o?void 0:{width:t,height:e},children:[this.renderMetadata(),this.renderVideo(),(0,i.jsx)(\"div\",{className:O.playCenter,children:(0,i.jsx)(I.default,{className:O.playButton,externalURL:n,renderLinkComponent:r})})]})}return(0,i.jsxs)(\"div\",{className:l()(m,O.newMosaicStyle,s,{[O.wrapperMediaMosaic]:u===T.MediaLayoutType.MOSAIC}),\"data-fullscreen\":c,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseMove:p?this.handleMouseMove:void 0,onKeyDown:this.handleKeyDown,style:this.getMediaStyle(),children:[this.renderMetadata(),t===L.AUDIO?this.renderAudio():this.renderVideo(),this.renderControls(),t===L.VIDEO?this.renderPlayPausePop():null,null!=d?(0,i.jsx)(\"div\",{className:l()({[O.overlayContentHidden]:p||c}),children:d()}):null]})}}"
    }
}