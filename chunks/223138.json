{
    "exports": {
        "default": "function F(e){let{activity:t,currentEmbeddedApplication:n,isCurrentUser:F,color:G,look:H,hover:B,user:V,isEmbedded:Y=!1}=e,{analyticsLocations:K}=(0,c.default)(),[W,z]=a.useState(!1),J=(0,s.useStateFromStores)([g.default],()=>g.default.getCurrentUser()),Z=t?.application_id,$=(0,s.useStateFromStores)([R.default],()=>Y?R.default.getEmbeddedActivityForUserId(V.id,Z):null,[V.id,Y,Z]),q=(0,L.default)({channelId:$?.channelId,userId:V.id,activity:t}),X=(0,s.useStateFromStores)([I.default,p.default,A.default,h.default],()=>Y||t?.application_id!=null&&(0,O.isLaunchable)({LibraryApplicationStore:I.default,LaunchableGameStore:p.default,DispatchApplicationStore:A.default,ConnectedAppsStore:h.default,applicationId:t.application_id})),Q=(0,s.useStateFromStores)([R.default],()=>Array.from(R.default.getSelfEmbeddedActivities().values()).some(e=>{let{applicationId:n,channelId:i}=e;return n===t?.application_id&&i===q})),ee=(0,s.useStateFromStores)([T.default],()=>null!=t&&null!=t.application_id&&T.default.getState(t.application_id,j.ActivityActionTypes.JOIN)===j.ActivityActionStates.LOADING),[et]=(0,f.default)(t?.application_id!=null?[t?.application_id]:[]),en=(0,s.useStateFromStores)([m.default,_.default,E.default,y.default,S.default,x.default,C.default],()=>(0,v.default)({user:V,activity:t,application:et,channelId:q,currentUser:J,isEmbedded:Y,ChannelStore:m.default,GuildStore:_.default,GuildMemberCountStore:E.default,RelationshipStore:y.default,SelectedChannelStore:S.default,VoiceStateStore:x.default,PermissionStore:C.default})),ei=(0,d.useAnalyticsContext)(),ea=!N.isPlatformEmbedded,es=(0,P.default)(t,j.ActivityFlags.JOIN)||Y;if(null==t||!es||null==t.application_id)return null;let el=!F&&(ea||X)&&!W&&!Q&&(!Y||en),er=null;F?er=w.default.Messages.USER_ACTIVITY_CANNOT_JOIN_SELF:!ea&&!X&&(er=w.default.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:t.name}));let eo=async(e,t)=>{null!=t.session_id&&null!=t.application_id&&(await o.default.join({userId:e.id,sessionId:t.session_id,applicationId:t.application_id,channelId:S.default.getVoiceChannelId(),messageId:null,intent:U.ActivityIntent.PLAY,embedded:(0,P.default)(t,j.ActivityFlags.EMBEDDED)}),(0,b.default)({type:j.AnalyticsGameOpenTypes.JOIN,userId:e.id,applicationId:t.application_id,partyId:t.party?.id,locationObject:ei.location,analyticsLocations:K}))},eu=async()=>{let e=!1;if(Y){if(!en||null==q||null==t.application_id)return;e=await (0,M.default)({applicationId:t.application_id,currentEmbeddedApplication:n,activityChannelId:q,locationObject:ei.location,embeddedActivitiesManager:k.default,analyticsLocations:K})}if(!e){en&&eo(V,t),z(!0);let e=await r.default.sendActivityInviteUser({type:j.ActivityActionTypes.JOIN_REQUEST,userId:V.id,activity:t,location:j.AnalyticsLocations.PROFILE_POPOUT});null!=e&&u.default.selectPrivateChannel(e.id)}},ed=en?w.default.Messages.JOIN:w.default.Messages.USER_ACTIVITY_ACTION_ASK_TO_JOIN;return Y&&(ed=w.default.Messages.EMBEDDED_ACTIVITIES_JOIN_ACTIVITY),(0,i.jsx)(l.Tooltip,{text:er,children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,i.jsx)(D.default,{onClick:eu,onMouseEnter:t,onMouseLeave:n,color:G,look:H,hover:B,disabled:!el,submitting:ee,fullWidth:!0,children:ed})}},\"join\")}"
    }
}