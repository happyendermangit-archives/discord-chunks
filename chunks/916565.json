{
    "exports": {
        "default": "async function B(e){var t,n,i,o,u,d,f,m,_,I,A,N,g,h,S;let{command:M,optionValues:y,context:L,commandTargetId:U,maxSizeCallback:F,commandOrigin:B=D.CommandOrigin.CHAT}=e;null==L.autocomplete&&a.default.dispatch({type:\"APPLICATION_COMMAND_USED\",context:L,command:M}),await C.default.unarchiveThreadIfNecessary(L.channel.id);let G=[],Y=[],W=(0,R.getCommandAttachmentDraftType)(B);if(null!=M.options)for(let e of M.options){if(e.type===s.ApplicationCommandOptionType.SUB_COMMAND||e.type===s.ApplicationCommandOptionType.SUB_COMMAND_GROUP||!(e.name in y))continue;let t=(null===(i=L.autocomplete)||void 0===i?void 0:i.name)===e.name||void 0,n=null;if(e.type===s.ApplicationCommandOptionType.STRING){let i=null!==(u=null===(o=v.getOptionalString(y,e.name))||void 0===o?void 0:o.trim())&&void 0!==u?u:\"\";n=null!=e.choices?b(e.choices,i):e.autocomplete?H(e,i,L):i,l(null!=L.autocomplete||null!=n,'Option \"'.concat(e.name,'\" expects a value')),null!=n&&G.push({type:e.type,name:e.name,value:n,focused:t});continue}if(e.type===s.ApplicationCommandOptionType.ATTACHMENT){if(null!=L.autocomplete)continue;let i=E.default.getUpload(L.channel.id,e.name,W);if(null==i)continue;let l=E.default.getUploads(L.channel.id,W).findIndex(e=>i.id===e.id);Y.push(i),n=l,G.push({type:e.type,name:e.name,value:n,focused:t});continue}let a=v.filterEmpty(y[e.name]);if(l(null!=L.autocomplete||1===a.length,'Option \"'.concat(e.name,'\" expects a single option type')),null==a[0]&&!t)continue;let r=null!==(d=a[0])&&void 0!==d?d:{type:\"text\",text:\"\"};switch(e.type){case s.ApplicationCommandOptionType.CHANNEL:if(\"channelMention\"===r.type)n=r.channelId;else if(\"text\"===r.type){if((0,R.isSnowflake)(r.text))n=r.text.trim();else{let e=(0,p.resolveApplicationCommandOption)(r.text,null===(f=L.guild)||void 0===f?void 0:f.id,L.channel.id);l((null==e?void 0:e.type)===\"channelMention\",\"Failed to resolve \".concat(r.text)),n=e.channelId}}break;case s.ApplicationCommandOptionType.ROLE:if(\"roleMention\"===r.type)n=r.roleId;else if(\"text\"===r.type){if((0,R.isSnowflake)(r.text))n=r.text.trim();else{let e=(0,p.resolveApplicationCommandOption)(r.text,null===(m=L.guild)||void 0===m?void 0:m.id,L.channel.id,{allowUsers:!1});l((null==e?void 0:e.type)===\"roleMention\",\"Failed to resolve \".concat(r.text)),n=e.roleId}}else\"textMention\"===r.type&&\"@everyone\"===r.text&&(n=null===(_=L.guild)||void 0===_?void 0:_.id);break;case s.ApplicationCommandOptionType.USER:if(\"userMention\"===r.type)n=r.userId;else if(\"text\"===r.type){if((0,R.isSnowflake)(r.text))n=r.text.trim();else{let e=(0,p.resolveApplicationCommandOption)(r.text,null===(I=L.guild)||void 0===I?void 0:I.id,L.channel.id,{allowRoles:!1});l((null==e?void 0:e.type)===\"userMention\",\"Failed to resolve \".concat(r.text)),n=e.userId}}break;case s.ApplicationCommandOptionType.MENTIONABLE:if(\"userMention\"===r.type)n=r.userId;else if(\"roleMention\"===r.type)n=r.roleId;else if(\"textMention\"===r.type&&\"@everyone\"===r.text)n=null===(A=L.guild)||void 0===A?void 0:A.id;else if(\"text\"===r.type){if((0,R.isSnowflake)(r.text))n=r.text.trim();else{let e=(0,p.resolveApplicationCommandOption)(r.text,null===(N=L.guild)||void 0===N?void 0:N.id,L.channel.id);(null==e?void 0:e.type)===\"userMention\"?n=e.userId:(null==e?void 0:e.type)===\"roleMention\"?n=e.roleId:(null==e?void 0:e.type)===\"textMention\"&&\"@everyone\"===e.text?n=null===(g=L.guild)||void 0===g?void 0:g.id:l(!1,\"Failed to resolve \".concat(r.text))}}break;case s.ApplicationCommandOptionType.BOOLEAN:\"text\"===r.type&&(n=x(r.text.trim()));break;case s.ApplicationCommandOptionType.INTEGER:if(\"text\"===r.type){let t=r.text.trim();n=null!=e.choices?Number(b(e.choices,t)):e.autocomplete?H(e,t,L,Number):Number(v.normalizeNumericString(T.default.locale,t))}break;case s.ApplicationCommandOptionType.NUMBER:if(\"text\"===r.type){let t=r.text.trim();n=null!=e.choices?Number(b(e.choices,t)):e.autocomplete?H(e,t,L,Number):Number(v.normalizeNumericString(T.default.locale,t))}break;default:l(!1,\"Unsupported option type: \".concat(e.type));continue}l(null!=L.autocomplete||null!=n,'Unexpected value for option \"'.concat(e.name,'\"')),null!=n&&G.push({type:e.type,name:e.name,value:n,focused:t})}if(null!=M.subCommandPath)for(let e=M.subCommandPath.length-1;e>=0;e-=1){let{name:t,type:n}=M.subCommandPath[e];G=[{type:n,name:t,options:G}]}if(null!=M.execute)return c.default.trackWithMetadata(P.AnalyticEvents.APPLICATION_COMMAND_USED,{command_id:M.id,application_id:M.applicationId,command_type:M.type,location:B===D.CommandOrigin.APPLICATION_LAUNCHER?D.ApplicationCommandTriggerLocations.APP_LAUNCHER:D.ApplicationCommandTriggerLocations.SLASH_UI}),M.execute(G,L);if(M.inputType===D.ApplicationCommandInputType.BUILT_IN||M.inputType===D.ApplicationCommandInputType.BUILT_IN_TEXT||M.inputType===D.ApplicationCommandInputType.BUILT_IN_INTEGRATION)return;let V={version:M.version,id:null!==(h=null===(t=M.rootCommand)||void 0===t?void 0:t.id)&&void 0!==h?h:M.id,guild_id:M.guildId,name:null!==(S=null===(n=M.rootCommand)||void 0===n?void 0:n.name)&&void 0!==S?S:M.name,type:M.type,options:G,application_command:M.rootCommand};null!=U&&(V.target_id=U),null!=L.autocomplete?(0,O.performAutocomplete)(M,L,V):(r.default.clearAll(L.channel.id,W),k({applicationId:M.applicationId,data:V,context:L,attachments:Y,maxSizeCallback:F,onMessageSuccess:()=>{w(y)},commandDisplayName:M.displayName,analytics_location:B===D.CommandOrigin.APPLICATION_LAUNCHER?D.ApplicationCommandTriggerLocations.APP_LAUNCHER:D.ApplicationCommandTriggerLocations.SLASH_UI}))}",
        "retryCommandMessage": "(e,t,n)=>{if(e.isCommandType()){let i=t.guild_id;null!=e.interactionData&&k({applicationId:n,data:e.interactionData,context:{channel:t,guild:null!=i?A.default.getGuild(i):null}})}}"
    }
}