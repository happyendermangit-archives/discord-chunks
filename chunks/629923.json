{
    "exports": {
        "default": "function O(e,t,n,d){let{insertData:p,isInline:m,isVoid:h,onChange:g,deleteBackward:O,deleteForward:k,deleteFragment:D}=e;e.insertData=n=>{if(null!=t&&y.EditorUtils.isEditorEmpty(e)&&n.types.includes(\"application/x-discord-interaction-data\")){let e=JSON.parse(n.getData(\"application/x-discord-interaction-data\")),{commandKey:i,interactionOptions:r}=(0,u.extractInteractionDataProps)(e),{application:d,command:c}=l.getCachedCommand(t,i);if(null!=c){let e=null!=d?{type:o.ApplicationCommandSectionType.APPLICATION,id:d.id,icon:d.icon,name:d.bot?.username??d.name,application:d}:null;return a.setActiveCommand({channelId:t.id,command:c,section:e,location:o.ApplicationCommandTriggerLocations.PASTE,initialValues:(0,s.getInitialValuesFromInteractionOptions)(c,r??[])}),null}}return p(n)},e.isInline=e=>!!T.has(e.type)||m(e),e.isVoid=e=>!!(\"applicationCommandOption\"===e.type&&A.has(e.optionType))||h(e),e.deleteBackward=t=>{P(e,()=>O(t))},e.deleteForward=t=>{P(e,()=>k(t))},e.deleteFragment=t=>{P(e,()=>D(t))};let U=null,j=null,w=null,F=null,G=null;return e.onChange=()=>{if(null!=t){let s=r.default.getState(t.id),u=y.EditorUtils.getFirstText(e),p=(0,c.getCommandQuery)(t,u?.text??\"\"),m=l.getChangeKeys(t,i.ApplicationCommandType.CHAT,p.text);if(y.EditorUtils.richValue(e)!==U||!y.SelectionUtils.equals(e.selection,j)||s.activeCommand!==w||null==G||m.some((e,t)=>G[t]!==e)){let r=_.HistoryUtils.withMergedEntry(e,()=>(function(e){let{editor:t,storeCommandState:n,channel:s,canUseCommands:r,canOnlyUseTextCommands:u,commandChanged:d,previousOptionValues:p}=e,{command:m,commandText:h}=L(t),_=n.activeCommand;if(!r||u&&_?.inputType!==o.ApplicationCommandInputType.BUILT_IN_TEXT&&_?.inputType!==o.ApplicationCommandInputType.BUILT_IN_INTEGRATION)return null!=m&&R(t,s.id,_,!0),null;if(null!=m){if(y.EditorUtils.isEditorEmpty(t)||null==_)return R(t,s.id,_,!1),null;let e=`${x.COMMAND_SENTINEL}${m.displayName}`;if(null==h||!h.startsWith(e)||0===E.getOptionNames(t).length&&(h.length<e.length+1||\" \"!==h[e.length]))return R(t,s.id,_,!0),null}else{if(null!=_&&d){let e=function(e,t,n){let i;let{initialValues:a,activeCommand:s}=n;if(null==s)return null;let l=(s.options?.length??0)>0?E.findTextOptions(e,s):null,r=(0,I.toTextValue)(y.EditorUtils.richValue(e),{mode:\"raw\",range:{anchor:y.EditorUtils.start(e,[]),focus:l?.[0]?.keyRange.anchor??y.EditorUtils.end(e,[])}}),o=\"\",u=r.toLocaleLowerCase(),d=f.PREFIX_COMMAND_REGEX.exec(u);null!=d&&(u=x.COMMAND_SENTINEL+u.substring(d.length));let c=`${0,x.COMMAND_SENTINEL}${s.displayName}`.toLocaleLowerCase(),p=`${0,x.COMMAND_SENTINEL}${s.name}`.toLocaleLowerCase();u.startsWith(c)&&u.length>c.length?o=r.substring(c.length).trim():u.startsWith(p)&&u.length>p.length&&(o=r.substring(p.length).trim());let m=[],h=null,_=null;if(null!=s.options){let e=new Set;if(null!=l)for(let i of l){e.add(i.name);let a=b(n,t,i.name)??i.text,s={type:\"applicationCommandOption\",optionName:i.name,optionDisplayName:i.displayName,optionType:i.type,children:[{text:a}]};m.push(s),0===i.text.length&&null==h&&(h=s)}for(let i of s.options)if(!e.has(i.name)&&(i.required||null!=a[i.name])){let e,a;o.length>0&&!A.has(i.type)?(e=o,o=\"\"):e=(a=b(n,t,i.name))??\"\";let s={type:\"applicationCommandOption\",optionName:i.name,optionDisplayName:i.displayName,optionType:i.type,children:[{text:e}]};m.push(s),0===e.length&&null==h&&(h=s),null==a&&(_=s)}}i=o.length>0?`${x.COMMAND_SENTINEL}${s.displayName} ${o.replace(/\\r|\\n/g,\" \")}`:0===m.length?`${x.COMMAND_SENTINEL}${s.displayName} `:`${x.COMMAND_SENTINEL}${s.displayName}`,m.unshift({text:i});let g={type:\"applicationCommand\",children:m,command:{id:s.id,name:s.name,displayName:s.displayName}};y.EditorUtils.withoutNormalizing(e,()=>{for(let[,t]of(C.SlateTransforms.insertNodes(e,[g],{at:S.FIRST_BLOCK_PATH}),y.EditorUtils.blocks(e).reverse()))y.PathUtils.isAfter(t,S.FIRST_BLOCK_PATH)&&C.SlateTransforms.removeNodes(e,{at:t,voids:!0})});let T=null;return null!=h?(C.SlateTransforms.selectCommandOption(e,h.optionName),T=h.optionName):null!=_?(C.SlateTransforms.selectCommandOption(e,_.optionName,!1),T=_.optionName):C.SlateTransforms.resetSelectionToEnd(e),null==_&&M(e,s),T}(t,s,n),i=E.getOptionValues(t,_);return v({guildId:s.guild_id,channelId:s.id,command:_,activeOption:e,currentOptionValues:i,previousOptionValues:null,validateAll:!0,allowEmpty:!0}),{commandId:_.id,optionValues:i}}if(null!=_&&!d)return a.setActiveCommand({channelId:s.id,command:null,section:null}),null;let e=y.EditorUtils.richValue(t)[0],r=e.children[0];if(N.has(e.type)&&y.TextUtils.isText(r)){let e=function(e,t){if(!e.startsWith(\"/\"))return null;let n=(0,c.getCommandQuery)(t,e.substring(1));if(!n.hasSpaceTerminator)return null;let{commands:a,sections:s}=l.getCachedResults(t,i.ApplicationCommandType.CHAT,n.text);if(0===a.length)return null;let r=n.text.trim(),u=r+\" \",d=a.filter(e=>e.inputType!==o.ApplicationCommandInputType.PLACEHOLDER&&(e.displayName===r||e.displayName.startsWith(u)));if(1===d.length&&d[0].displayName===r){let e=d[0],t=s.find(t=>t.application?.id===e.applicationId);return{command:e,section:t}}return null}(r.text,s);if(null!=e)return a.setActiveCommand({channelId:s.id,command:e.command,section:e.section}),null}}if(null!=_&&null!=m){!function(e,t){if(null==t.options||0===t.options.length)return!1;let n=E.findTextOptions(e,t);return 0!==n.length&&(y.EditorUtils.withoutNormalizing(e,()=>{for(let t=n.length-1;t>=0;t--){let i=n[t];C.SlateTransforms.textToInline(e,{type:\"applicationCommandOption\",optionName:i.name,optionDisplayName:i.displayName,optionType:i.type,children:[{text:i.text}]},{anchor:i.keyRange.anchor,focus:i.valueRange.focus})}let t=y.EditorUtils.getFirstText(e);if(null==t)return!1;let i=t.text.trim();t.text!==i&&C.SlateTransforms.textToText(e,i,{anchor:{path:S.FIRST_TEXT_PATH,offset:0},focus:{path:S.FIRST_TEXT_PATH,offset:t.text.length}})}),!0)}(t,_)&&M(t,_);let e=E.getOptionValues(t,_),n=y.EditorUtils.above(t,{match:e=>y.EditorUtils.isInline(t,e)&&\"applicationCommandOption\"===e.type,mode:\"lowest\"}),i=n?.[0].optionName??null;return v({guildId:s.guild_id,channelId:s.id,command:_,activeOption:i,currentOptionValues:e,previousOptionValues:p,validateAll:!1,allowEmpty:!1}),{commandId:m.id,optionValues:e}}return null})({editor:e,storeCommandState:s,channel:t,canUseCommands:n,canOnlyUseTextCommands:d,commandChanged:s.activeCommand?.id!==w?.id,previousOptionValues:F}));if(null!=r){let t=_.HistoryUtils.currentEntry(e);null!=t&&(t.commandId=r.commandId),F=r.optionValues}else F=null;U=y.EditorUtils.richValue(e),j=e.selection,w=s.activeCommand,G=m}}g()},e}",
        "unsetCommand": "function R(e,t,n,i){let[s]=y.EditorUtils.blocks(e)[0],l=(i?(0,I.serializeDescendant)(s,{mode:\"plain\"}).trimEnd():\"\").split(\"\\n\").map(e=>({type:\"line\",children:[{text:e}]})),r=[l.length-1];for(let[,t]of(C.SlateTransforms.insertNodes(e,l,{at:S.FIRST_BLOCK_PATH}),y.EditorUtils.blocks(e).reverse()))y.PathUtils.isAfter(t,r)&&C.SlateTransforms.removeNodes(e,{at:t,voids:!0});null!=n&&a.setActiveCommand({channelId:t,command:null,section:null})}"
    }
}