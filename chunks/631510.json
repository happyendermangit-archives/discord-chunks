{
    "exports": {
        "default": {
            "type": "function(e){let{editorRef:t,channel:n,isEditorFocused:i,onSelectSticker:a,stickerIconVisible:r=!1,submitButtonVisible:c=!1}=e,f=l.useContext(E.default),[g,x]=l.useState(null),[O,k]=l.useState(!1),[D,F]=l.useState(null),G=(0,_.useExpressionPickerStore)(e=>null!=e.activeView),B=l.useRef(null),[H,V]=l.useState(\"\"),[Y,K]=l.useState(\"\"),[W,z]=l.useState(!1),[J,Z]=l.useState(!1),$=(0,M.useStickerSuggestionResults)(H,O,n),{analyticsLocations:q,AnalyticsLocationProvider:X}=(0,h.default)(m.default.EXPRESSION_SUGGESTIONS),{handleTextChange:Q,debouncedSetTextInputValue:ee}=(0,M.useTextChangeHandler)({setTextInputValue:V,setHasDismissed:k,setHasSelection:Z,setFocusedSuggestionType:x});l.useEffect(()=>{let e=e=>{z(e)},n=e=>{let n=\"\"!==e&&null!=e;Z(n),n&&(x(null),t.current?.focus())};return f.addListener(\"text-changed\",Q),f.addListener(\"autocomplete-visibility-change\",e),f.addListener(\"selection-changed\",n),()=>{f.removeListener(\"text-changed\",Q),f.removeListener(\"autocomplete-visibility-change\",e),f.removeListener(\"selection-changed\",n)}},[Q,t,f]),l.useLayoutEffect(()=>{null==g&&F(null)},[g]);let[et,en]=l.useState(!1);l.useLayoutEffect(()=>{requestAnimationFrame(()=>{let e=B.current;en(i||e?.contains(e?.ownerDocument.activeElement)===!0)})},[i]);let ei=$.length>0,ea=et&&!G&&!W&&!O&&!J&&ei,{stickersNavigator:es}=function(e){let{editorRef:t,hasStickerResults:n,shouldRenderSuggestions:i,focusedSuggestionType:a,setFocusedStickerListItem:s,setFocusedSuggestionType:r,setHasDismissed:o,setTextInputValue:c}=e,f=l.useCallback((e,t)=>{s(t)},[s]),p=(0,u.default)({id:\"expression-suggestions-stickers\",isEnabled:!0,scrollToStart:j,scrollToEnd:j,orientation:d.Orientations.HORIZONTAL,setFocus:f,useVirtualFocus:!0});return l.useEffect(()=>{let e=e=>{if(i&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey){switch(e.key){case\"ArrowUp\":e.preventDefault(),null==a&&n&&(p.focusFirstVisibleItem(),r(0));break;case\"ArrowDown\":r(null),t.current?.focus();break;case\"Escape\":r(null),o(!0),c(\"\"),t.current?.focus()}0===a&&p.containerProps.onKeyDown(e)}};return window.addEventListener(\"keydown\",e,{capture:!0}),()=>window.removeEventListener(\"keydown\",e,{capture:!0})},[p,i,a,r,n,t,o,s,c]),{stickersNavigator:p}}({editorRef:t,hasStickerResults:ei,shouldRenderSuggestions:ea,focusedSuggestionType:g,setFocusedSuggestionType:x,setHasDismissed:k,setFocusedStickerListItem:F,setTextInputValue:V}),el=(e,t)=>{if(ea){if(R.default.track(L.AnalyticEvents.AUTO_SUGGEST_EXPRESSION_SELECTED,{sticker_id:e.id,suggestion_trigger:Y}),t===I.StickerSendability.SENDABLE)k(!0),a(e,y.StickerSelectLocation.EXPRESSION_SUGGESTIONS),ee.cancel(),V(\"\");else if((0,S.isStandardSticker)(e)){let t=C.default.getStickerPack(e.pack_id);null!=t&&(0,T.default)({stickerPack:t,analyticsLocations:q})}f.emit(\"sticker-suggestions-hidden\")}},er=l.useRef([]),eo=l.useRef(!1);l.useEffect(()=>{ea&&(er.current=$),ea!==eo.current&&(f.emit(ea?\"sticker-suggestions-shown\":\"sticker-suggestions-hidden\"),ea&&((0,v.throttledTrackExpressionSuggestionDisplayed)(H),K(H))),eo.current=ea},[f,ea,$,H]);let eu=!ea,ed=ea?$:er.current;return(0,s.jsx)(X,{children:(0,s.jsxs)(p.Clickable,{tabIndex:eu?-1:0,\"aria-hidden\":eu,className:o()(b.container,{[b.hidden]:eu,[b.submitButtonOffset]:c,[b.stickerIconOffset]:r}),innerRef:B,style:{minWidth:U},onClick:()=>t.current?.focus(),children:[(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.ListNavigatorProvider,{navigator:es,children:(0,s.jsx)(u.ListNavigatorContainer,{children:e=>{let{ref:t,tabIndex:n,...i}=e;return(0,s.jsx)(\"div\",{className:b.stickerResults,ref:e=>{t.current=e},onMouseLeave:()=>{null==g&&F(null)},tabIndex:eu?-1:n,...i,children:ed.map((e,t)=>{let{sticker:n,sendability:i}=e;return(0,s.jsx)(w,{isFocused:D===`${t}`,isHidden:eu,sendability:i,listIndex:t,onMouseOver:()=>{es.setFocus(`${t}`),F(`${t}`)},onSelectSticker:el,sticker:n},n.id)})})}})}),(0,s.jsxs)(\"div\",{className:b.bottomInformationTextContainer,children:[(0,s.jsx)(\"div\",{className:b.textDivider}),(0,s.jsxs)(\"div\",{className:b.bottomInformationLayout,children:[(0,s.jsx)(p.Text,{className:b.descriptionText,style:{maxWidth:U},variant:\"text-sm/normal\",children:null!=D?P.default.Messages.EXPRESSION_SUGGESTIONS_STICKER_NAME.format({stickerName:$[+D]?.sticker.name}):P.default.Messages.EXPRESSION_SUGGESTIONS_STICKER_SHORT_NAV_PROMPT.format({upHook:(e,t)=>(0,s.jsx)(p.KeyCombo,{shortcut:\"up\",className:b.keybind},t)})}),(0,s.jsx)(p.Clickable,{onClick:()=>{R.default.track(L.AnalyticEvents.STICKER_SUGGESTIONS_ENABLED_TOGGLED,{enabled:!1,location:{section:L.AnalyticsSections.EXPRESSION_PICKER}}),A.ExpressionSuggestionsEnabled.updateSetting(!1)},children:(0,s.jsx)(p.Tooltip,{text:P.default.Messages.EXPRESSION_SUGGESTIONS_STICKER_DISABLE,children:e=>(0,s.jsx)(N.default,{...e,className:b.closeIcon})})})]})]})]}),(0,s.jsx)(\"div\",{className:b.containerBackground})]})})}",
            "compare": null
        }
    }
}