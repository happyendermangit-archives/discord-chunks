{
    "exports": {
        "ConfettiCanvas": {
            "render": "function(t,e){var o=t.className,a=t.environment,u=t.onClick,d=t.onMouseDown,p=t.onMouseMove,h=t.onMouseUp,v=t.onBeforeRender,m=t.onAfterRender,_=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,[\"className\",\"environment\",\"onClick\",\"onMouseDown\",\"onMouseMove\",\"onMouseUp\",\"onBeforeRender\",\"onAfterRender\"]),I=i.useRef(null),O=i.useRef(new Map),T=i.useRef(null),N=i.useRef(0),M=i.useRef(0),z=i.useCallback(function(){var t=I.current;if(null!=t){var e=t.getContext(\"2d\");if(null!=e){e.clearRect(0,0,t.width,t.height),null==v||v(e),O.current.forEach(function(n,i){var r=n.confetti,o=n.spriteCanvas;r.update(a),r.draw(o,e),r.shouldDestroy(t,a)&&O.current.delete(i)}),null==m||m(e),O.current.size>0?T.current=window.requestAnimationFrame(z):(e.clearRect(0,0,t.width,t.height),T.current=null);var n=Date.now();0!==N.current&&(M.current=1e3/(n-N.current)),N.current=n}}},[a,m,v]);i.useEffect(function(){null!=T.current&&(window.cancelAnimationFrame(T.current),T.current=window.requestAnimationFrame(z))},[z]);var S=i.useCallback(function(t,e){O.current.set(t.id,{confetti:t,spriteCanvas:e}),null==T.current&&z()},[z]),V=i.useCallback(function(t,e,n,i,o){var a,s,u,d,p,h,v,m,_,I,O,T,N,M,z,V=(a=null!==(z=t.id)&&void 0!==z?z:(0,r.v4)(),s=t,u=n,d=i,p=o,m=k((v=(h=s,f(f({id:a},l),h))).size),I=(_=function(t,e){if(null!=t){var n=e.sprites.findIndex(function(e){return\"string\"==typeof t?e.src===t&&e.colorize:e.src===t.src&&e.colorize===t.colorize});if(-1!==n)return[t,n]}return E(e.sprites)}(d,u))[0],O=_[1],T=function(t,e,n){if(!(\"string\"==typeof(i=t)||i.colorize))return 0;var i,r=null!=e?n.colors.findIndex(function(t){return t===e}):-1;return -1!==r?r:Math.floor(w(0,n.colors.length-1))}(null!=d?d:I,p,u),new c({id:a,position:k(v.position),velocity:k(v.velocity),rotation:(N=v.rotation,function(t){switch(t.type){case\"static\":var e=R(t.value);return new y(new g(e.x),new g(e.y),new g(e.z));case\"static-random\":var n=R(t.minValue),i=R(t.maxValue);return new y(new g(w(n.x,i.x)),new g(w(n.y,i.y)),new g(w(n.z,i.z)));case\"linear\":e=R(t.value);var r=R(t.addValue);return new y(new x(e.x,r.x),new x(e.y,r.y),new x(e.z,r.z));case\"linear-random\":n=R(t.minValue),i=R(t.maxValue);var o=R(t.minAddValue),a=R(t.maxAddValue);return new y(new x(w(n.x,i.x),w(o.x,a.x)),new x(w(n.y,i.y),w(o.y,a.y)),new x(w(n.z,i.z),w(o.z,a.z)));case\"oscillating\":e=R(t.value);var s=R(t.start),u=R(t.final),c=R(t.duration),l=R(t.direction);return new y(new b(e.x,s.x,u.x,c.x,l.x,t.easingFunction),new b(e.y,s.y,u.y,c.z,l.y,t.easingFunction),new b(e.z,s.z,u.z,c.z,l.z,t.easingFunction));case\"oscillating-random\":n=R(t.minValue),i=R(t.maxValue);var d=R(t.minStart),p=R(t.maxStart),h=R(t.minFinal),f=R(t.maxFinal),v=R(t.minDuration),m=R(t.maxDuration),_=R(t.minDirection),k=R(t.maxDirection);return new y(new b(w(n.x,i.x),w(d.x,p.x),w(h.x,f.x),w(v.x,m.x),C(_.x,k.x),E(t.easingFunctions)[0]),new b(w(n.y,i.y),w(d.y,p.y),w(h.y,f.y),w(v.y,m.y),C(_.y,k.y),E(t.easingFunctions)[0]),new b(w(n.z,i.z),w(d.z,p.z),w(h.z,f.z),w(v.z,m.z),C(_.z,k.z),E(t.easingFunctions)[0]))}}(f(f({},N),{valueType:\"Vector3\"}))),dragCoefficient:k(v.dragCoefficient),size:m,opacity:(M=v.opacity,function(t){switch(t.type){case\"static\":return new g(t.value);case\"static-random\":return new g(w(t.minValue,t.maxValue));case\"linear\":return new x(t.value,t.addValue);case\"linear-random\":return new x(w(t.minValue,t.maxValue),w(t.minAddValue,t.maxAddValue));case\"oscillating\":return new b(t.value,t.start,t.final,t.duration,t.direction,t.easingFunction);case\"oscillating-random\":return new b(w(t.minValue,t.maxValue),w(t.minStart,t.maxStart),w(t.minFinal,t.maxFinal),w(t.minDuration,t.maxDuration),C(t.minDirection,t.maxDirection),E(t.easingFunctions)[0])}}(f(f({},M),{valueType:\"number\"}))),spriteX:T*u.spriteWidth+2*T,spriteY:O*u.spriteHeight+2*O,spriteWidth:u.spriteWidth,spriteHeight:u.spriteHeight}));return S(V,e),V},[S]),P=i.useCallback(function(t){O.current.delete(t)},[]),F=i.useCallback(function(){return O.current.clear()},[]),D=i.useCallback(function(){return I.current},[]);i.useImperativeHandle(e,function(){return{createConfetti:V,addConfetti:S,deleteConfetti:P,clearConfetti:F,getCanvas:D}},[V,S,P,F,D]);var L=i.useCallback(function(t,e){var n,i,r=e.clickHandler,o=e.mouseHandler;if(null!=r||null!=o){var u=null===(n=I.current)||void 0===n?void 0:n.getBoundingClientRect();if(null!=u){var c=function(t,e){if(null==e)throw Error(\"element should not be null\");var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}(t,I.current);if(s(c,{x:u.left,y:u.top,width:u.width,height:u.height})){if(null!=o)return o(t);if(null!=r){var l=-1e3/M.current*2,d=function(t,e){for(var n=0,i=Array.from(t.values());n<i.length;n++){var r=i[n];if(null!=r&&e(r))return r}return null}(O.current,function(t){var e=t.confetti,n=e.previewPositionUpdate(a,l);return s(c,{x:n.x-e.width/2,y:n.y-e.height/2,width:e.width,height:e.height})});r(t,null!==(i=null==d?void 0:d.confetti)&&void 0!==i?i:null)}}}}},[a]),U=i.useCallback(function(t){return L(t,{clickHandler:u})},[L,u]),A=i.useCallback(function(t){return L(t,{clickHandler:d})},[L,d]),j=i.useCallback(function(t){return L(t,{mouseHandler:p})},[L,p]),H=i.useCallback(function(t){return L(t,{mouseHandler:h})},[L,h]);return i.useEffect(function(){var t=function(t,e,n){null!=n&&window.addEventListener(t,e)};return t(\"click\",U,u),t(\"mousedown\",A,d),t(\"mousemove\",j,p),t(\"mouseup\",H,h),function(){window.removeEventListener(\"click\",U),window.removeEventListener(\"mousedown\",A),window.removeEventListener(\"mousemove\",j),window.removeEventListener(\"mouseup\",j)}},[U,A,j,H,u,d,p,h]),i.useEffect(function(){var t=I.current,e=new ResizeObserver(function(){!function(t){if(null!=t){var e=t.getBoundingClientRect(),i=e.width,r=e.height;t.width=i*n.g.devicePixelRatio,t.height=r*n.g.devicePixelRatio}}(I.current)});return null!=t&&e.observe(t),function(){null!=t&&e.unobserve(t)}},[]),i.createElement(\"canvas\",f({},_,{className:o,ref:I}))}"
        },
        "Environment": "function(t){var e=void 0===t?{}:t,n=e.gravity,i=e.wind;this.gravity=-9.8,this.wind=0,this.gravity=null!=n?n:this.gravity,this.wind=null!=i?i:this.wind}",
        "SpriteCanvas": {
            "render": "function(t,e){var n,o=t.className,s=t.visible,u=t.sprites,c=t.colors,l=t.spriteWidth,d=t.spriteHeight,p=i.useRef(null),h=i.useRef([]),f=i.useRef(!1),v=i.useRef({});i.useImperativeHandle(e,function(){return{getCanvas:function(){return p.current},getCreateData:function(){return{sprites:h.current,colors:c,spriteWidth:l,spriteHeight:d}},addReadyListener:function(t){var e=(0,r.v4)();return v.current[e]=t,e},removeReadyListener:function(t){delete v.current[t]},isReady:f.current}},[c,d,l]);var m=i.useCallback(function(){var t=p.current,e=null==t?void 0:t.getContext(\"2d\",{willReadFrequently:!0});null!=e&&null!=t&&(e.clearRect(0,0,t.width,t.height),h.current.forEach(function(t,n){var i=function(i,r){var o=l*r+2*r,a=d*n+2*n;if(e.drawImage(t.image,o,a,l,d),null!=i){for(var s,u,c=e.getImageData(o,a,l,d),p=(\"#\"===(s=i)[0]&&(s=s.slice(1)),{r:(u=parseInt(s,16))>>16&255,g:u>>8&255,b:255&u}),h=0;h<c.data.length;h+=4)c.data[h]=p.r,c.data[h+1]=p.g,c.data[h+2]=p.b;e.putImageData(c,o,a)}};t.colorize?c.forEach(function(t,e){return i(t,e)}):i(null,0)}))},[c,d,l]),y=i.useCallback(function(){var t=u.map(function(t){var e=new Image,n=\"string\"==typeof t?t:t.src,i=\"string\"==typeof t||t.colorize;e.src=n;var r=new Promise(function(t){e.onload=t});return{colorize:i,image:e,src:n,loadPromise:r}});return Promise.all(t.map(function(t){return t.loadPromise})).then(function(){h.current=t.map(function(t){return{colorize:t.colorize,image:t.image,src:t.src}})})},[u]),g=i.useCallback(function(t){for(var e in v.current)v.current[e](t)},[]),x=i.useCallback(function(){var t,e,n,i;return t=void 0,e=void 0,n=void 0,i=function(){return function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError(\"Generator is already executing.\");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,function(t){switch(t.label){case 0:return[4,y()];case 1:return t.sent(),m(),f.current=!0,g(!0),[2]}})},new(n||(n=Promise))(function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((i=i.apply(t,e||[])).next())})},[g,y,m]);return i.useEffect(function(){x()},[x]),i.useEffect(function(){return function(){return g(!1)}},[g]),i.useEffect(function(){null!=p.current&&(p.current.width=(l+2)*Math.max(c.length,1),p.current.height=(d+2)*u.length)},[c.length,d,l,u.length]),i.createElement(\"canvas\",{ref:p,className:a()(o,((n={})[\"SpriteCanvas-module_spriteCanvasHidden__ndzQV\"]=!(void 0!==s&&s),n))})}"
        },
        "useConfettiCannon": "function T(t,e){var n,r=i.useState(null!==(n=null==e?void 0:e.isReady)&&void 0!==n&&n),o=r[0],a=r[1];i.useEffect(function(){var t=null==e?void 0:e.addReadyListener(a);return function(){null!=t&&(null==e||e.removeReadyListener(t))}},[e]);var s=i.useCallback(function(n,i){var r=void 0===i?{}:i,o=r.sprite,a=r.color,s=null==e?void 0:e.getCreateData(),u=null==e?void 0:e.getCanvas();if(null!=u&&null!=s&&0!==s.sprites.length)return null==t?void 0:t.createConfetti(n,u,s,o,a)},[t,e]),u=i.useCallback(function(t,e,n){for(var i=[],r=0;r<e;r++){var o=s(t,n);o&&i.push(o)}return i},[s]),c=i.useCallback(function(n){var i=null==e?void 0:e.getCanvas();null!=i&&(null==t||t.addConfetti(n,i))},[t,e]),l=i.useCallback(function(e){null==t||t.deleteConfetti(e)},[t]),d=i.useCallback(function(){return null==t?void 0:t.clearConfetti()},[t]);return i.useMemo(function(){return{createConfetti:s,createMultipleConfetti:u,addConfetti:c,clearConfetti:d,deleteConfetti:l,isReady:o&&null!=e&&null!=t}},[c,d,t,s,u,l,o,e])}"
    }
}