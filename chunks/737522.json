{
    "exports": {
        "BasePopout": "class C extends r.Component{static #e=this.defaultProps={autoInvert:!1,nudgeAlignIntoViewport:!1,spacing:0,loadingComponent:(0,i.jsx)(N.LoadingPopout,{})};static #t=this.contextType=S.default;shouldShowPopout(e,t){return null!=e.shouldShow?e.shouldShow:t.shouldShowPopout}componentDidMount(){this.shouldShowPopout(this.props,this.state)&&this.setupShowPopout()}componentDidUpdate(e,t){e.shouldShow,this.props.shouldShow;let n=this.shouldShowPopout(this.props,this.state);if((this.shouldShowPopout(e,t)!==n||t.isLoading!==this.state.isLoading)&&(n?this.setupShowPopout():this.unsubscribe()),this.props.closeOnScroll!==e.closeOnScroll){let e=this.getDomElement();this.props.closeOnScroll?e.ownerDocument?.addEventListener(\"scroll\",this.close,!0):e.ownerDocument?.removeEventListener(\"scroll\",this.close,!0)}}getDomElement(){let e=_().findDOMNode(this);if(!(0,E.isElement)(e))throw Error(\"Popout cannot find DOM node\");return e}setupShowPopout(){let e=this.getDomElement();e.ownerDocument?.addEventListener(\"mousedown\",this.handleDocumentMouseDown,!0),e.ownerDocument?.addEventListener(\"mouseup\",this.handleDocumentMouseUp,!0),this.props.closeOnScroll&&e.ownerDocument?.addEventListener(\"scroll\",this.close,!0),this.context.windowDispatch.subscribe(O.ComponentActions.POPOUT_CLOSE,this.close),this.domElementRef.current=e,this.isValidClickStart=!1,this.forceUpdate()}unsubscribe(){let e=this.domElementRef.current;null!=e&&(e.ownerDocument?.removeEventListener(\"mousedown\",this.handleDocumentMouseDown,!0),e.ownerDocument?.removeEventListener(\"mouseup\",this.handleDocumentMouseUp,!0),e.ownerDocument?.removeEventListener(\"scroll\",this.close,!0)),this.context.windowDispatch.unsubscribe(O.ComponentActions.POPOUT_CLOSE,this.close),this.resizeObserver?.disconnect()}componentWillUnmount(){this.unsubscribe(),this.domElementRef.current=null,this.loadingTimeout.stop(),this.validClickTimeout.stop()}render(){let{children:e,useMouseEnter:t}=this.props,n=this.shouldShowPopout(this.props,this.state);return(0,i.jsxs)(r.Fragment,{children:[e({onMouseDown:this.handlePreload,...t?{onMouseEnter:this.handleMouseEnter}:{},onKeyDown:this.handleKeyboardPreload,onClick:this.handleClick,\"aria-controls\":n?this.popoutId:void 0,\"aria-expanded\":n},{isShown:n,position:this.state.renderedPosition}),(0,i.jsx)(u.HeadingLevel,{forceLevel:2,children:this.renderLayer()})]})}renderLayer(){if(!this.shouldShowPopout(this.props,this.state)||null==this.domElementRef.current)return null;let{position:e,align:t,nudgeAlignIntoViewport:n,spacing:r,autoInvert:o,fixed:a,positionKey:s,disablePointerEvents:_,layerContext:E}=this.props,{resizeKey:l,isLoading:u,shouldShowLoadingState:c}=this.state;return u&&!c?null:(0,i.jsx)(I.Layer,{layerContext:E??A.appLayerContext,children:(0,i.jsx)(T.ReferencePositionLayer,{ref:this.layerRef,onMount:this.handlePopoutShow,onUnmount:this.handlePopoutHide,id:this.popoutId,reference:this.domElementRef,position:e,align:t,nudgeAlignIntoViewport:n,spacing:r,autoInvert:o,fixed:a,positionKey:s??String(l),disablePointerEvents:_,onPositionChange:this.handlePopoutPositionChange,children:this.renderPopout})})}toggleShow(e){this.state.shouldShowPopout!==e&&this.setState({shouldShowPopout:e})}constructor(...e){super(...e),this.domElementRef=r.createRef(),this.layerRef=r.createRef(),this.popoutRef=r.createRef(),this.popoutId=`popout_${a()()}`,this.loadingTimeout=new l.Timeout,this.validClickTimeout=new l.Timeout,this.isValidClickStart=!1,this.state={renderedPosition:this.props.position,shouldShowPopout:!1,shouldShowLoadingState:!1,isLoading:!1,resizeKey:0},this.handlePopoutShow=()=>{this.context.windowDispatch.dispatch(O.ComponentActions.POPOUT_SHOW)},this.handlePopoutHide=()=>{this.context.windowDispatch.dispatch(O.ComponentActions.POPOUT_HIDE)},this.handleSetPopoutRef=e=>{let t=e?.ownerDocument.defaultView;null!=e&&null!=t&&(this.popoutRef.current=e,this.resizeObserver?.disconnect(),this.resizeObserver=new t.ResizeObserver(()=>{_().flushSync(()=>{this.setState({resizeKey:this.state.resizeKey+1})})}),this.resizeObserver.observe(e))},this.renderPopout=(e,t)=>{let{renderPopout:n}=this.props;return this.state.isLoading?this.props.loadingComponent:n({...e,updatePosition:t,closePopout:this.close,setPopoutRef:this.handleSetPopoutRef})},this.close=()=>{let{onRequestClose:e,shouldShow:t}=this.props;e?.(),null==t&&this.toggleShow(!1)},this.handleClick=e=>{let{onShiftClick:t,shouldShow:n,onRequestOpen:i,onRequestClose:r}=this.props;if(e.shiftKey&&null!=t){t(e);return}let o=null!=n;(o?n:this.state.shouldShowPopout)?r?.():i?.(),!o&&this.setState(e=>{let{shouldShowPopout:t}=e;return{shouldShowPopout:!t}})},this.handleMouseEnter=()=>{let{onRequestOpen:e}=this.props;e?.(),this.setState({shouldShowPopout:!0})},this.handlePreload=async()=>{let{preload:e}=this.props;if(null!=e){this.setState({isLoading:!0}),this.loadingTimeout.start(250,()=>this.setState({shouldShowLoadingState:!0}),!1);try{await e()}finally{this.setState({isLoading:!1})}}},this.handleKeyboardPreload=e=>{R.has(e.key)&&this.handlePreload()},this.handleDocumentMouseDown=e=>{let{ignoreModalClicks:t}=this.props,n=e.target,i=this.domElementRef.current;if(null!=i){if((0,T.referencePortalAwareContains)(i,n)||null!=n.closest(\".\"+d.ContextMenuClassName)||t&&(0,c.hasAnyModalOpen)())return;this.isValidClickStart=!0}},this.handleDocumentMouseUp=()=>{this.isValidClickStart&&(this.isValidClickStart=!1,this.close())},this.handlePopoutPositionChange=e=>{this.setState({renderedPosition:e})}}}"
    }
}