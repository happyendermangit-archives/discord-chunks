{
    "exports": {
        "default": "class i{constructor(e,t,n,i=.1,r=10){this.currentVolume=0,this.speakingHistoryIndex=0,this.speakingCounter=0,this.onProcess=null;let o=e.createAnalyser();o.fftSize=512,o.smoothingTimeConstant=i;let a=e.createMediaStreamSource(t);a.connect(o);let s=[];for(let e=0;e<r;e++)s.push(!1);let _=window.setInterval(()=>{this.update(),this.onProcess?.(this.speaking,this.currentVolume)},20);this.threshold=n,this.analyser=o,this.interval=_,this.fftBins=new Float32Array(o.fftSize),this.source=a,this.speakingHistory=s,this.silenceThreshold=this.speakingHistory.length,this.silentFrames=this.silenceThreshold}stop(){this.source.disconnect(),clearInterval(this.interval),this.speakingCounter=0}get speaking(){return this.speakingCounter>0||this.silentFrames<this.silenceThreshold}update(){this.currentVolume=function(e,t){let n=-1/0;e.getFloatFrequencyData(t);for(let e=4;e<t.length;e++)t[e]>n&&t[e]<0&&(n=t[e]);return n}(this.analyser,this.fftBins),this.speakingHistory[this.speakingHistoryIndex]&&this.speakingCounter--;let e=this.currentVolume>this.threshold;this.speakingHistory[this.speakingHistoryIndex]=e,e&&this.speakingCounter++,++this.speakingHistoryIndex===this.speakingHistory.length&&(this.speakingHistoryIndex=0),this.speakingCounter>0?this.silentFrames=0:this.silentFrames++}}"
    }
}