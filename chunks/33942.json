{
    "exports": {
        "OAuth2AuthorizePage": "function X(){let e=(0,u.useLocation)(),t=d.useMemo(()=>(0,b.parseOAuth2AuthorizeProps)(e.search),[e.search]);return(0,T.default)(),(0,o.jsx)(B.OAuth2Page,{children:(0,o.jsx)(Z,{...t,showLogout:!0})})}",
        "OAuth2AuthorizeModal": "function Q(e){let{transitionState:t,...n}=e;return(0,o.jsx)(B.OAuth2Modal,{transitionState:t,\"aria-labelledby\":q,children:(0,o.jsx)(Z,{...n,scrollable:!0})})}",
        "OAuth2Authorize": "function Z(e){let{scrollable:t,...n}=e,{header:s,body:i,footer:r,nextStep:a,appDetails:d}=J(n),u=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(\"div\",{className:z.content,children:[s,i,null==a?d:null]}),r]});return t?(0,o.jsx)(\"div\",{className:z.authorize,children:(0,o.jsx)(h.ScrollerThin,{orientation:\"auto\",children:u})}):(0,o.jsx)(\"div\",{className:z.authorize,children:(0,o.jsx)(\"div\",{children:u})})}",
        "useOAuth2AuthorizeForm": "function J(e){var t,n,s,i,r;let a,l,m,{clientId:h,responseType:T,redirectUri:I,codeChallenge:S,codeChallengeMethod:B,state:X,prompt:Q,authorization:Z,scopes:J,permissions:$,guildId:ee,channelId:et,disableGuildSelect:en=!1,showLogout:es=!1,cancelCompletesFlow:ei=!0,isTrustedName:er=!1,isEmbeddedFlow:ea=!1,userInstall:eo=!1,callback:ed,callbackWithoutPost:eu,onClose:el}=e,ef=(0,u.useLocation)(),e_=C.default.useExperiment({location:\"auth web\"}),ec=e_.userAppsTreatment===C.UserAppsTreatment.ALLOWED;!ec&&(eo=!1);let{requestedScopes:eg,accountScopes:em}=d.useMemo(()=>{let e=(0,b.filterScopes)(J),t=M.OrderedAccountScopes.filter(t=>e.includes(t));return{requestedScopes:e,accountScopes:t}},[J]),[eh,ev]=d.useState(null),[eE,ep]=d.useState(1),[ey,eT]=d.useState(null),[eC,eI]=d.useState(0),[eS,eA]=d.useState(!1),eD=null==eh?void 0:eh.guilds,[eN,eO]=d.useState(null!=ee?ee:null),[eP,eb]=d.useState(null!=et?et:null),[eV,eR]=d.useState(O.default.NONE),ek=d.useMemo(()=>(null==eh?void 0:eh.user)!=null?new D.default(eh.user):null,[null==eh?void 0:eh.user]),eM=d.useMemo(()=>null==eD?void 0:eD.find(e=>e.id===eN),[eD,eN]),ew=(0,c.useStateFromStores)([p.default],()=>p.default.getCurrentEmbeddedActivity()),eL=(0,c.useStateFromStoresObject)([E.default,p.default],()=>{let e;let t=E.default.getIsEnabled();if(null!=ew){if(e=p.default.getShelfActivities(ew.guildId).find(e=>e.application_id===ew.applicationId),t&&void 0===e){var n;e=null===(n=E.default.getDeveloperShelfItems().find(e=>e.id===ew.applicationId))||void 0===n?void 0:n.embeddedActivityConfig}if(null!=e)return{...K.DEFAULT_EMBEDDED_ACTIVITY_CONFIG,...e}}return{}},[ew]),eU=Object.keys(eL).length>0?eL:null,eG=d.useCallback(async e=>{if(null!=eu){eu(e);return}if(!e&&!ei){null!=ed&&(ed({application:null==eh?void 0:eh.application,guild:eM}),null==el||el());return}try{eA(!0);let t=await (0,V.authorize)({authorize:e,clientId:h,scopes:eg,responseType:T,redirectUri:I,codeChallenge:S,codeChallengeMethod:B,state:X,permissions:_.default.remove(null!=$?$:O.default.NONE,eV),guildId:null==eN||eo?void 0:eN,channelId:null!=eP?eP:void 0,userInstall:eo});if(null!=ed)ed({application:null==eh?void 0:eh.application,location:t.location,guild:eM}),null==el||el();else if(null!=t.location){let{host:e,path:n}=f.parse(t.location);P.default.isDiscordHostname(e)&&n===j.Routes.OAUTH2_AUTHORIZED?(0,A.transitionTo)(j.Routes.OAUTH2_AUTHORIZED,{state:{application:null==eh?void 0:eh.application,guild:eM}}):window.location=t.location}else eA(!1)}catch(t){let e=t.body;(null==e?void 0:e.message)!=null&&\"\"!==e.message?eT(Error(e.message)):eT(e),ep(1),eI(2),eA(!1)}},[eu,ei,ed,null==eh?void 0:eh.application,eM,el,h,eg,T,I,S,B,X,$,eV,eN,eo,eP]),eF=d.useRef(!1),eH=d.useCallback(async()=>{if(0===eC){if(eI(1),!N.default.isAuthenticated()){(0,V.logoutWithRedirect)(ef);return}if(!eF.current){eF.current=!0;try{let e=null!=Z?Z:await (0,V.fetchAuthorization)({clientId:h,scopes:eg,responseType:T,redirectUri:I,codeChallenge:S,codeChallengeMethod:B,state:X,userInstall:ec&&eo});ev((0,R.convertOAuth2Authorization)(e)),Q===w.OAuth2Prompts.NONE&&e.authorized?eG(!0):eI(2),(0,y.trackWithMetadata)(j.AnalyticEvents.OAUTH2_AUTHORIZE_VIEWED,{application_id:e.application.id})}catch(n){let{status:e,body:t}=n;if(401===e){(0,V.logoutWithRedirect)(ef);return}eT(Error(null!=t.message?t.message:\"\".concat(Object.keys(t)[0],\": \").concat(Object.values(t)[0]))),eI(2)}finally{eF.current=!1}}}},[Z,h,S,B,eC,ef,Q,I,T,eg,eG,X,eo,ec]),eB=d.useCallback((e,t)=>{eR(n=>e?_.default.remove(n,t):_.default.add(n,t))},[]);if(d.useEffect(()=>{let e=eg.filter(e=>!M.ValidScopes.includes(e));0===eg.length?(eT(Error(\"No scopes were provided.\")),eI(2)):e.length>0?(eT(Error(\"Invalid scope: \".concat(e[0]))),eI(2)):(0,k.containsDisallowedPermission)(null!=$?$:O.default.NONE)?(eT(Error(\"Invalid permission(s) provided.\")),eI(2)):eH()},[eH,eg,$]),ey instanceof Error)return{body:(0,o.jsx)(x.OAuth2Error,{message:ey.message})};if(2!==eC||null==eh||null==ek)return{body:(0,o.jsx)(v.Spinner,{})};let ex=!1;switch(eE){case 1:let eY=null==ey||ey instanceof Error?{}:ey,ej=null==eD?void 0:eD.sort((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase())),eK=!eo&&eg.includes(j.OAuth2Scopes.WEBHOOK_INCOMING),eW=eK||!eo&&(eg.includes(j.OAuth2Scopes.BOT)||eg.includes(j.OAuth2Scopes.APPLICATIONS_COMMANDS));a=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.default,{application:eh.application,accountScopes:em,errors:eY,isTrustedName:er}),eW?(0,o.jsx)(F.default,{error:(null!==(s=null!==(n=eY[j.OAuth2Scopes.BOT])&&void 0!==n?n:eY[j.OAuth2Scopes.APPLICATIONS_COMMANDS])&&void 0!==s?s:[])[0],selectedGuildId:eN,onGuildChange:eO,guilds:null!=ej?ej:[],disabled:\"\"!==eN&&!0===en}):null,eK?(0,o.jsx)(Y.default,{error:(null!==(i=eY[j.OAuth2Scopes.WEBHOOK_INCOMING])&&void 0!==i?i:[])[0],selectedChannelId:eP,selectedGuildId:eN,onChannelChange:eb}):null]}),eg.includes(j.OAuth2Scopes.BOT)&&!_.default.equals($,O.default.NONE)&&(m=2),ex=eW&&null==eM||eK&&null==eP;break;case 2:a=(0,o.jsx)(G.default,{application:eh.application,permissions:null!=$?$:O.default.NONE,deniedPermissions:eV,onPermissionsChange:eB,guild:eM}),l=1}let ez=null===(t=eh.bot)||void 0===t?void 0:t.approximate_guild_count,eq=(0,o.jsx)(L.default,{embeddedActivityConfig:eU,application:eh.application,scopes:eg,redirectUri:null!==(r=eh.redirect_uri)&&void 0!==r?r:null,approximateGuildCount:void 0!==ez?ez:null,isEmbeddedFlow:ea}),eX=(0,o.jsx)(H.default,{id:q,user:ek,application:eh.application,bot:eh.bot,accountScopes:em,showLogout:es||!1,location:ef,isTrustedName:er}),eQ=(0,o.jsxs)(\"div\",{className:z.footer,children:[null!=l?(0,o.jsx)(g.Button,{look:g.Button.Looks.LINK,color:g.Button.Colors.PRIMARY,onClick:()=>ep(l),children:W.default.Messages.BACK}):(0,o.jsx)(g.Button,{look:g.Button.Looks.LINK,color:g.Button.Colors.PRIMARY,onClick:()=>eG(!1),children:W.default.Messages.CANCEL}),null!=m?(0,o.jsx)(g.Button,{onClick:()=>ep(m),disabled:ex,children:W.default.Messages.CONTINUE}):(0,o.jsx)(g.Button,{onClick:()=>eG(!0),disabled:ex,submitting:eS,children:W.default.Messages.AUTHORIZE})]});return{header:eX,body:a,footer:eQ,nextStep:m,appDetails:eq,sendAuthorize:eG}}",
        "openOAuth2ModalWithCreateGuildModal": "function ee(e,t){if((0,S.isMidjourneyOnboardingFlow)(\"create-guild-and-oauth2-modal\")){I.default.openCreateGuildModal({onSuccess:n=>et({...e,guildId:n},t)});return}et(e,t)}",
        "openOAuth2Modal": "function et(e,t){(0,m.openModal)(t=>(0,o.jsx)(Q,{...t,...e,cancelCompletesFlow:!1,callback:$.bind(null,e.callback)}),{onCloseCallback:t})}",
        "getOAuth2AuthorizeProps": "function en(e){let{hostname:t=\"\",host:n,path:s,query:i}=f.parse(e);return null!=s&&null!=i&&(P.default.isDiscordHostname(t)||n===window.location.host)&&(s.startsWith(\"/api\".concat(j.Endpoints.OAUTH2_AUTHORIZE))||s.startsWith(j.Routes.OAUTH2_AUTHORIZE))?(0,b.parseOAuth2AuthorizeProps)(i):null}"
    }
}